<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="ä¸€æ¬¡ä½¿ç”¨pprofå·¥å…·å®šä½å’Œæ’æŸ¥goroutineæ³„æ¼çš„å®æˆ˜è®°å½•ã€‚">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://www.yeqown.xyz/2020/01/17/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%8E%92%E6%9F%A5gRPC%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84goroutine%E6%B3%84%E6%BC%8F/">
  <meta property="og:site_name" content="Yeqown">
  <meta property="og:title" content="ä¸€æ¬¡gRPCä½¿ç”¨ä¸å½“å¯¼è‡´goroutineæ³„æ¼æ’æŸ¥è®°å½•">
  <meta property="og:description" content="ä¸€æ¬¡ä½¿ç”¨pprofå·¥å…·å®šä½å’Œæ’æŸ¥goroutineæ³„æ¼çš„å®æˆ˜è®°å½•ã€‚">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-01-17T13:20:17+08:00">
    <meta property="article:modified_time" content="2020-01-17T13:20:17+08:00">
    <meta property="article:tag" content="GRPC">
    <meta property="article:tag" content="Golang">
    <meta property="article:tag" content="Pprof">
    <meta property="article:tag" content="Memory Leak">
<title>ä¸€æ¬¡gRPCä½¿ç”¨ä¸å½“å¯¼è‡´goroutineæ³„æ¼æ’æŸ¥è®°å½• | Yeqown</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="https://www.yeqown.xyz/2020/01/17/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%8E%92%E6%9F%A5gRPC%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84goroutine%E6%B3%84%E6%BC%8F/">
<link rel="stylesheet" href="/book.min.c2fbf3db843e2f212ac724c116ea0973ae0c44d9926b1c14e16b29de812a6dc5.css" integrity="sha256-wvvz24Q&#43;LyEqxyTBFuoJc64MRNmSaxwU4Wsp3oEqbcU=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.f17080086de35ea2d8ae7bbe8fd7dfab7183b485730a9353be99f4f0986495e5.js" integrity="sha256-8XCACG3jXqLYrnu&#43;j9ffq3GDtIVzCpNTvpn08JhkleU=" crossorigin="anonymous"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <meta name="referrer" content="no-referrer-when-downgrade"><!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Yeqown</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>







  
<ul>
  
  <li>
    <a href="/categories"  target="_blank" rel="noopener">
        Categories
      </a>
  </li>
  
  <li>
    <a href="/tags"  target="_blank" rel="noopener">
        Tags
      </a>
  </li>
  
</ul>










  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/aboutme/" class="">About Me</a>
  

        </li>
      
    
  </ul>














</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>ä¸€æ¬¡gRPCä½¿ç”¨ä¸å½“å¯¼è‡´goroutineæ³„æ¼æ’æŸ¥è®°å½•</h3>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#èƒŒæ™¯">èƒŒæ™¯</a></li>
        <li><a href="#pprofæ’æŸ¥">pprofæ’æŸ¥</a></li>
        <li><a href="#ä»£ç æ’æŸ¥">ä»£ç æ’æŸ¥</a></li>
        <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
<article class="markdown book-post">
  <h2>
    ä¸€æ¬¡gRPCä½¿ç”¨ä¸å½“å¯¼è‡´goroutineæ³„æ¼æ’æŸ¥è®°å½•
  </h2>
  
  <div class="flex align-center text-small book-post-date">
    <img src="/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 17, 2020</span>
  </div>



  

  
  <div class="text-small">
    
      <a href="/tags/gRPC/">GRPC</a>, 
      <a href="/tags/Golang/">Golang</a>, 
      <a href="/tags/pprof/">Pprof</a>, 
      <a href="/tags/memory-leak/">Memory Leak</a>
  </div>
  


  <div class="book-post-content"><blockquote>
<p>ç”±äºä¿ç•™å¿…è¦çš„â€œç½ªè¯â€ï¼Œå› æ­¤æŸäº›å¼‚å¸¸åªèƒ½é€šè¿‡æ–‡å­—æ¥æè¿°äº†ï½</p>
</blockquote>
<h3 id="èƒŒæ™¯">
  èƒŒæ™¯
  <a class="anchor" href="#%e8%83%8c%e6%99%af">#</a>
</h3>
<p>æ˜¨æ™šä¸Š10ç‚¹å·¦å³ï¼Œå‰ç«¯ç«¥é‹åæ˜ å¼€å‘ç¯å¢ƒæ¥å£å“åº”è¶…æ—¶ï¼Œä½†è¿‡äº†å‡ åˆ†é’Ÿååˆæ¢å¤äº†ï¼Œäºæ˜¯æœ‰äº†è¿™ä¸€ç¯‡æ–‡ç« ã€‚</p>
<blockquote>
<p>å…¶å®å¾ˆä¹…ä»¥å‰å°±å‡ºç°äº†å†…å­˜å ç”¨å¼‚å¸¸çš„æƒ…å†µï½ï¼Œåªæ˜¯å ç”¨å¹¶ä¸é«˜ä¹Ÿå°±æ˜¯50MBå·¦å³ï¼ŒåŠ ä¸Šå½“æ—¶è¿˜å¿™ç€å†™ä¸šåŠ¡éœ€æ±‚å°±æ²¡æœ‰æ€¥ç€åŠ ä¸Špprofæ¥æ£€æŸ¥ã€‚</p>
</blockquote>
<p>é¦–å…ˆé€šè¿‡<code>è¿ç»´å¹³å°(k8s based)</code>ç›´è§‚å‘ç°äº†è¯¥podæ•°é‡ä»1å˜æˆäº†2, å†ç»“åˆæ–°å¢podçš„å¯åŠ¨æ—¶é—´ï¼Œæˆ‘å‘ç°è¯¥æ—¶é—´æ­£å¥½æ˜¯å‰ç«¯ç«¥é‹åæ˜ çŠ¶å†µçš„æ—¶é—´èŠ‚ç‚¹ï¼Œç¨åæˆ‘æ£€æŸ¥äº†ä¸‹è¯¥æœåŠ¡çš„èµ„æºé™åˆ¶å¦‚ä¸‹å›¾ï¼š</p>
<img src="/images/pprof-goroutine-leak-1.png"/>
<p>é‚£ä¹ˆå‰ç«¯ç«¥é‹åæ˜ çš„é—®é¢˜å°±å¾ˆæ˜æ˜¾äº†ï¼Œç”±äºæŸç§åŸå› å¯¼è‡´äº†podå†…å­˜è¶…é™ï¼Œè§¦å‘äº†è¿ç»´å¹³å°å¯¹äºå†…å­˜è¶…é™çš„â€œå®¹å¿æœºåˆ¶â€ã€‚è¡¨ç°ä¸º: æ–°å¢ä¸€ä¸ªpodç”¨äºç¼“è§£æœåŠ¡å‹åŠ›ï¼Œè€æœåŠ¡ç”±äºæ— æ³•ç”³è¯·æ›´å¤šå†…å­˜ä¼šå¯¼è‡´å´©æºƒæˆ–å…¶ä»–å¼‚å¸¸ï¼ˆæ— æ³•å“åº”å®¢æˆ·ç«¯è¯·æ±‚ï¼‰ï¼Œè¿™ä¸åæ˜ çš„æƒ…å†µä¸€è‡´ã€‚</p>
<img src="/images/pprof-goroutine-leak-3.png"/>
<h3 id="pprofæ’æŸ¥">
  pprofæ’æŸ¥
  <a class="anchor" href="#pprof%e6%8e%92%e6%9f%a5">#</a>
</h3>
<p>çŸ¥é“äº†æœåŠ¡å†…å­˜å¼‚å¸¸ï¼Œæƒ³è¦å…·ä½“å®šä½çš„è¯ï¼Œè¿™æ—¶å€™å°±éœ€è¦pprofä¸Šåœºäº†ã€‚</p>
<blockquote>
<p>å¦‚æœä½ éœ€è¦é‡å¯æœåŠ¡æ‰èƒ½å¼€å¯pprofçš„è¯ï¼Œé‚£ä¹ˆåªèƒ½ç­‰å¾…å¤ç°äº†ã€‚è¿™é‡Œæˆ‘åœ¨å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒä¸€ç›´å¼€å¯äº†pprofï¼Œå› æ­¤å¯ä»¥ç›´æ¥æ£€æŸ¥ã€‚ä¸ªäººè§‰å¾—ï¼Œè¿™æ ·è¿˜å¯ä»¥å¸®åŠ©å¼€å‘å’Œæµ‹è¯•ï¼Œå®Œæˆæœ€åˆçš„æ€§èƒ½åˆ†æğŸ˜¼ã€‚</p>
</blockquote>
<h4 id="å†…å­˜æ£€æŸ¥">
  å†…å­˜æ£€æŸ¥
  <a class="anchor" href="#%e5%86%85%e5%ad%98%e6%a3%80%e6%9f%a5">#</a>
</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>go tool pprof --http<span style="color:#f92672">=</span>:8080 https://service.host.com/debug/pprof/heap
</span></span></code></pre></div><p>è¿™ä¸ªå‘½ä»¤æ˜¯åœ¨æœ¬åœ°æ‰“å¼€ä¸€ä¸ªwebæœåŠ¡ï¼Œç›´æ¥å¯è§†åŒ–è¯¥æœåŠ¡çš„å†…å­˜å ç”¨æƒ…å†µã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨:</p>
<p><code>go tool pprof https://service.host.com/debug/pprof/heap</code> ä½¿ç”¨äº¤äº’æ¨¡å¼æ¥åˆ†æã€‚é€šè¿‡è¿™ä¸ªæ­¥éª¤å®šä½åˆ°äº† grpcç›¸å…³çš„åŒ…å†…å­˜å ç”¨å¼‚å¸¸åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<pre tabindex="0"><code>50MB+ google.golang.org/grpc/internal/transport.newBufWriter
50MB+ bufio.NewReaderSize
http2 ç›¸å…³åº“çš„å ç”¨ä¹Ÿæ¯”è¾ƒå¤š
</code></pre><p>è¿™ä¸€åˆ‡éƒ½æŒ‡å‘äº†æˆ‘ä»¬ä½¿ç”¨çš„gRPCï¼Œå¯æ˜¯ä¸ºå•¥ä½¿ç”¨gRPCä¼šç”¨åˆ°è¿™ä¹ˆâ€œå¤šâ€å†…å­˜å‘¢ï¼Ÿæ¥ç€åˆ†æ</p>
<h4 id="goroutineæ£€æŸ¥">
  goroutineæ£€æŸ¥
  <a class="anchor" href="#goroutine%e6%a3%80%e6%9f%a5">#</a>
</h4>
<p>æ‰“å¼€ä¸€çœ‹ <strong><a href="https://service.host.com/debug/pprof/">https://service.host.com/debug/pprof/</a><strong>ä¸€çœ‹ï¼Œgoroutineå’Œheapå±…â€œé«˜â€(4000+)ä¸ä¸‹ï¼Œè™½ç„¶å¯¹äºåŠ¨è¾„10W+çš„åˆ«äººå®¶çš„æœåŠ¡æ¥è¯´ï¼Œè¿™ç‚¹æ ¹æœ¬ä¸ç®—äº‹ï¼Œä½†åœ¨æˆ‘ä»¬è¿™ç§å°ä½œåŠé‡Œå¯å°±ç®—å¼‚å¸¸äº†ã€‚ç‚¹å¼€çœ‹goroutineæŸ¥çœ‹è¯¦æƒ…ï¼Œæœ‰å››ä¸ªéƒ¨åˆ†çš„goroutineåˆ†åˆ«æœ‰900ä¸ªå·¦å³ï¼Œè¿™é‡Œå°±ç®—åˆæ­¥å®šä½äº†</strong>â€œgRPCå®¢æˆ·ç«¯ä½¿ç”¨äº†è¾ƒå¤šçš„goroutineï¼Œä½†æ˜¯å´æ²¡æœ‰æ­£ç¡®çš„ç»“æŸæ‰â€</strong>ï¼Œå¦‚ä¸‹å›¾ï¼ˆè¿™æ˜¯è§£å†³åçš„æˆªçš„å›¾ï¼‰ï¼š</p>
<img src="/images/pprof-goroutine-leak-2.jpg"/>
<h4 id="pprofæ€»ç»“">
  pprofæ€»ç»“
  <a class="anchor" href="#pprof%e6%80%bb%e7%bb%93">#</a>
</h4>
<p>æœåŠ¡ä¸­ä½¿ç”¨çš„gRPCå®¢æˆ·ç«¯å‡ºäº†æŸäº›æ•…éšœï¼Œå¯¼è‡´äº†goroutineæ³„æ¼ï¼Œå¼•å‘äº†OOMï¼ˆOut Of Memoryï¼‰ã€‚å¦‚ä¸‹å›¾ï¼š</p>
<img src="/images/pprof-goroutine-leak-3.png"/>
<h3 id="ä»£ç æ’æŸ¥">
  ä»£ç æ’æŸ¥
  <a class="anchor" href="#%e4%bb%a3%e7%a0%81%e6%8e%92%e6%9f%a5">#</a>
</h3>
<p>ä¸Šä¸€æ­¥å·²ç»å®šä½åˆ°æ˜¯gRPCå®¢æˆ·ç«¯çš„é—®é¢˜ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥ä»ä»£ç ä¸Šæ‰‹äº†ã€‚æˆ‘å¿ƒé‡Œå·²ç»æœ‰ä¸€ä¸ªâ€œå«Œç–‘çŠ¯â€äº†ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">defaultHandler</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">handler</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">timeout</span>        = <span style="color:#ae81ff">5</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// _              pb.UserServiceClient = &amp;handler{}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Init of usersvc.handler
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Init</span>(<span style="color:#a6e22e">rpcAddr</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ... ç•¥å»ä¸è¡¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">handler</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// rpc configs
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">rpcAddr</span>          <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">client</span>           <span style="color:#a6e22e">pb</span>.<span style="color:#a6e22e">UserServiceClient</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">lastGrpcReqError</span> <span style="color:#66d9ef">error</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">handler</span>) <span style="color:#a6e22e">connectRPC</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">client</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">lastGrpcReqError</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è¿™é‡Œåˆ¤æ–­çš„æœ¬æ„æ˜¯ï¼šå¦‚æœå®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥ï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// æˆ–è€…æœŸé—´å› ä¸ºå¼‚å¸¸æƒ…å†µï¼Œå¯¼è‡´å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯è¿æ¥ä¸­æ–­çš„æƒ…å†µä¸‹å°è¯•é‡è¿ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// ä½†æ˜¯å¿½ç•¥äº†gRPCå®ç°ä¸­ï¼Œå¯¹äºå®¢æˆ·ç«¯çš„å¤„ç†ï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// 1. grpc.Dail æ˜¯å¼‚æ­¥çš„
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// 2. grpc æœ‰è‡ªå·±çš„é‡è¿æœºåˆ¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// è¿™ä¸€éƒ¨åˆ†æˆ‘è¿˜æ²¡æœ‰çœ‹å®Œï¼Œå°±ä¸ä¹±å‘è¡¨çœ‹æ³•äº†ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">conn</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">grpc</span>.<span style="color:#a6e22e">Dial</span>(<span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">rpcAddr</span>, <span style="color:#a6e22e">grpc</span>.<span style="color:#a6e22e">WithInsecure</span>())
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">Std</span>.<span style="color:#a6e22e">Errorf</span>(<span style="color:#e6db74">&#34;could not dial: %s with err: %v&#34;</span>, <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">rpcAddr</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">Std</span>.<span style="color:#a6e22e">Infof</span>(<span style="color:#e6db74">&#34;usersvc.client.connectRPC called&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">client</span> = <span style="color:#a6e22e">pb</span>.<span style="color:#a6e22e">NewUserServiceClient</span>(<span style="color:#a6e22e">conn</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// QueryBasicInfoByID based default Handler .
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">QueryBasicInfoByID</span>(<span style="color:#a6e22e">in</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">pb</span>.<span style="color:#a6e22e">ByIDForm</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">pb</span>.<span style="color:#a6e22e">BasicInfoResponse</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">defaultHandler</span>.<span style="color:#a6e22e">connectRPC</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">cancel</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">WithTimeout</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#a6e22e">timeout</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">cancel</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">defaultHandler</span>.<span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">QueryBasicInfoByID</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">in</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">defaultHandler</span>.<span style="color:#a6e22e">lastGrpcReqError</span> = <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æŠ›å¼€æœ¬æ„ä¸è°ˆï¼Œè¿™æ ·çš„å†™æ³•ä¹Ÿæ˜¯ä¸OKçš„ã€‚ã€‚ã€‚å› ä¸º</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">client</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">lastGrpcReqError</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ç»è¿‡åˆå§‹åŒ–åçš„clientå§‹ç»ˆä¸ç­‰äºnil, é‚£ä¹ˆæ§åˆ¶grpc.Dailçš„å°±åªå‰©ä¸‹äº†err, 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// è€Œerrçš„å–å€¼æ˜¯æ‰€æœ‰çš„æ–¹æ³•çš„æŠ¥é”™ï¼Œè€Œä¸åªæ˜¯è¿æ¥å¼‚å¸¸ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p>é‚£ä¹ˆä¿®å¤å·¥ä½œåªéœ€è¦ <em><strong>å»é™¤æ‰è¿™â€œç®€é™‹ç ´çƒ‚â€çš„é‡è¿</strong></em> å°±è¡Œäº†ï¼š<em><strong>æ³¨é‡Šæ‰æ‰€æœ‰è·ŸconnectRPCå’ŒlastGrpcReqErrorç›¸å…³çš„ä»£ç è¡Œ</strong></em>ã€‚</p>
<p>è¿™é‡Œæˆ‘è¿˜åšäº†ä¸€ä¸ªç®€å•çš„æµ‹è¯•ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">N</span> = <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Test_clientErr</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">profileWriter</span>, <span style="color:#a6e22e">_</span> = <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">OpenFile</span>(<span style="color:#e6db74">&#34;./profile.normal.out&#34;</span>, <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">O_CREATE</span>|<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">O_WRONLY</span>, <span style="color:#ae81ff">0644</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">heapWriter</span>, <span style="color:#a6e22e">_</span> = <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">OpenFile</span>(<span style="color:#e6db74">&#34;./memprofile.normal.out&#34;</span>, <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">O_CREATE</span>|<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">O_WRONLY</span>, <span style="color:#ae81ff">0644</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">pprof</span>.<span style="color:#a6e22e">StartCPUProfile</span>(<span style="color:#a6e22e">profileWriter</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">pprof</span>.<span style="color:#a6e22e">StopCPUProfile</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">N</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Normal err = nil
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">QueryBasicInfoByID</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">usrpb</span>.<span style="color:#a6e22e">ByIDForm</span>{<span style="color:#a6e22e">UserId</span>: <span style="color:#ae81ff">1</span>}) 
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ä¼šè§¦å‘ err = NotFound
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// resp, err := QueryBasicInfoByID(&amp;usrpb.ByIDForm{UserId: 11})
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Log</span>(<span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">GC</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">pprof</span>.<span style="color:#a6e22e">WriteHeapProfile</span>(<span style="color:#a6e22e">heapWriter</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Error</span>(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æœªä¿®å¤å‰ï¼Œ100ä¸ªNotFoundé”™è¯¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Showing nodes accounting for 8040.19kB, 100% of 8040.19kB total
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Showing top 10 nodes out of 26
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//       flat  flat%   sum%        cum   cum%
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//  5446.66kB 67.74% 67.74%  5446.66kB 67.74%  google.golang.org/grpc/internal/transport.newBufWriter
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//  1056.33kB 13.14% 80.88%  1056.33kB 13.14%  bufio.NewReaderSize
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//      513kB  6.38% 87.26%      513kB  6.38%  golang.org/x/net/http2/hpack.newInternalNode
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//   512.19kB  6.37% 93.63%   512.19kB  6.37%  runtime.malg
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//   512.01kB  6.37%   100%  1025.01kB 12.75%  golang.org/x/net/http2/hpack.addDecoderNode
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1025.01kB 12.75%  golang.org/x/net/http2.(*Framer).ReadFrame
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1025.01kB 12.75%  golang.org/x/net/http2.(*Framer).readMetaFrame
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1025.01kB 12.75%  golang.org/x/net/http2/hpack.(*Decoder).Write
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1025.01kB 12.75%  golang.org/x/net/http2/hpack.(*Decoder).parseFieldLiteral
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1025.01kB 12.75%  golang.org/x/net/http2/hpack.(*Decoder).parseHeaderFieldRepr
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æœªä¿®å¤å‰ 100 normal
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Showing nodes accounting for 2208.36kB, 100% of 2208.36kB total
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Showing top 10 nodes out of 19
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//       flat  flat%   sum%        cum   cum%
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//  1184.27kB 53.63% 53.63%  1184.27kB 53.63%  runtime/pprof.StartCPUProfile
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//   512.08kB 23.19% 76.82%   512.08kB 23.19%  golang.org/x/net/http2.init
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//   512.01kB 23.18%   100%   512.01kB 23.18%  golang.org/x/net/http2/hpack.addDecoderNode
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1184.27kB 53.63%  git.class100.com/backend/protobuf/benchmark_test.Test_CallUsergRPC_Normal
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%   512.01kB 23.18%  golang.org/x/net/http2.(*Framer).ReadFrame
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%   512.01kB 23.18%  golang.org/x/net/http2.(*Framer).readMetaFrame
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%   512.01kB 23.18%  golang.org/x/net/http2/hpack.(*Decoder).Write
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%   512.01kB 23.18%  golang.org/x/net/http2/hpack.(*Decoder).parseFieldLiteral
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%   512.01kB 23.18%  golang.org/x/net/http2/hpack.(*Decoder).parseHeaderFieldRepr
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%   512.01kB 23.18%  golang.org/x/net/http2/hpack.(*Decoder).readString
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ä¿®å¤åï¼Œ100ä¸ªNotFoundé”™è¯¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Showing nodes accounting for 1537.02kB, 100% of 1537.02kB total
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Showing top 10 nodes out of 14
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//       flat  flat%   sum%        cum   cum%
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//  1024.02kB 66.62% 66.62%  1537.02kB   100%  golang.org/x/net/http2/hpack.addDecoderNode
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//      513kB 33.38%   100%      513kB 33.38%  golang.org/x/net/http2/hpack.newInternalNode
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1537.02kB   100%  golang.org/x/net/http2.(*Framer).ReadFrame
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1537.02kB   100%  golang.org/x/net/http2.(*Framer).readMetaFrame
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1537.02kB   100%  golang.org/x/net/http2/hpack.(*Decoder).Write
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1537.02kB   100%  golang.org/x/net/http2/hpack.(*Decoder).parseFieldLiteral
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1537.02kB   100%  golang.org/x/net/http2/hpack.(*Decoder).parseHeaderFieldRepr
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1537.02kB   100%  golang.org/x/net/http2/hpack.(*Decoder).readString
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1537.02kB   100%  golang.org/x/net/http2/hpack.buildRootHuffmanNode
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//          0     0%   100%  1537.02kB   100%  golang.org/x/net/http2/hpack.getRootHuffmanNode
</span></span></span></code></pre></div><p>åªæ˜¯100ä¸ªé”™è¯¯çš„è§¦å‘å°±èƒ½çœ‹è§å†…å­˜å ç”¨æœ‰æ˜æ˜¾çš„ä¸Šå‡ï¼Œä¿®å¤ç‰ˆæœ¬çš„å†…å­˜å ç”¨ä¹Ÿæ˜¾è‘—ä¸‹é™äº†ã€‚é‡æ–°éƒ¨ç½²æœåŠ¡åï¼Œé€šè¿‡æ£€æŸ¥pprofï¼Œå¦‚ä¸‹å›¾ï¼šgoroutineæ•°é‡ä¹Ÿæ­£å¸¸(4000+ =&gt; 68)äº†ã€‚</p>
<img src="/images/pprof-goroutine-leak-5.png" />
<p>ä»å†…å­˜å ç”¨ä¸Šçœ‹ï¼Œä¹Ÿä¸€ç›´å¤„äºæ­£å¸¸çš„èŒƒå›´ï¼ˆå½“ç„¶è¿˜éœ€è¦é•¿æœŸè§‚å¯Ÿï¼‰ï¼š</p>
<img src="/images/pprof-goroutine-leak-6.png" />
<h4 id="ä»£ç åˆ†ææ€»ç»“">
  ä»£ç åˆ†ææ€»ç»“
  <a class="anchor" href="#%e4%bb%a3%e7%a0%81%e5%88%86%e6%9e%90%e6%80%bb%e7%bb%93">#</a>
</h4>
<p>è¯¥é—®é¢˜ä¸€ç›´å­˜åœ¨è¯¥æœåŠ¡ä¸­ï¼Œç”šè‡³å½±å“åˆ°äº†å…¶ä¸Šæ¸¸æœåŠ¡ï¼Œä½†æ˜¯ç”±äºç§ç§åŸå› ï¼š</p>
<pre><code>1. è¿­ä»£è¾ƒå¿«ï¼ŒæœåŠ¡æ›´æ–°é¢‘ç¹
2. lastGrpcReqErrorè§¦å‘å¹¶ä¸é¢‘ç¹
3. å†…å­˜è¶…é™è®¾ç½®è¾ƒé«˜ï¼Œæ²¡æœ‰è§¦å‘æŠ¥è­¦
4. ä¸šåŠ¡é©±åŠ¨ã€‚ã€‚ã€‚ORZ
</code></pre>
<p>ä¸€ç›´å¾—è¿‡ä¸”è¿‡ï¼Œæ²¡æœ‰å½±å“ä¸šåŠ¡ä¹Ÿå°±æ— æ‰€è°“äº†ï¼Œæƒ³èµ·æ¥ä¸€å¥è¯ï¼Œâ€œæˆ‘ä»¬è¿™ä½“é‡ï¼Œä¸è¦è¿‡æ—©ä¼˜åŒ–æµªè´¹æ—¶é—´ï¼Œå…ˆæŠŠéœ€æ±‚å®ç°å’¯â€ã€‚ä¸è¿‡æˆ‘è§‰çš„æ’æŸ¥è¿™ç§é—®é¢˜è¿˜æ˜¯å¾ˆæœ‰è¶£çš„ï¼Œè‡³å°‘æ¯”å†™ä¸šåŠ¡æœ‰è¶£ã€‚</p>
<h3 id="æ€»ç»“">
  æ€»ç»“
  <a class="anchor" href="#%e6%80%bb%e7%bb%93">#</a>
</h3>
<ol start="0">
<li>ğŸ˜‚pprofæˆ‘ç”¨å¾—ä¹Ÿä¸å¤Ÿç†Ÿç»ƒï¼Œè¿™é‡Œå§‘ä¸”ç®—æ˜¯ä¸€æ¬¡å®è·µäº†</li>
<li>ğŸ˜‚ä¿ç•™æ›´å¤šçš„ç½ªè¯ï¼Œæ–¹ä¾¿æ°´ä¸€ç¯‡æ–‡ç« ï¼Œé¿å…â€œå£è¯´æ— å‡­â€ï¼ˆé‚£æˆ‘ä¹Ÿæƒ³ä¸åˆ°ï¼Œæˆ‘ä¼šå†™è¿™ç§æ–‡ç« å•Šï¼‰</li>
<li>ğŸ˜‚ç›‘æ§æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œä¸€å®šè¦ç›‘æ§å¥½ä½ çš„æœåŠ¡ï¼Œå¹¶åŠæ—¶å‘Šè­¦</li>
<li>ğŸ˜‚pprof ä¹Ÿæ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œæ—©ç‚¹åŸ‹è¿›ä½ çš„æœåŠ¡é‡Œï¼Œé¿å…åˆ°äº†è¦åˆ†æçš„æ—¶å€™å´æ²¡æœ‰æ•°æ®å¯ç”¨äºåˆ†æ</li>
<li>ğŸ˜‚7ä¸ªæœˆå¤ªé•¿äº†ï¼Œä»¥è‡³äºæˆ‘éƒ½ä¸æƒ³æ‰¿è®¤è¿™æ˜¯æˆ‘å†™çš„</li>
<li>ğŸ˜‚è¿™é‡Œæ²¡æœ‰å»åˆ†ægRPCçš„å®ç°ç»†èŠ‚ï¼Œå› ä¸ºæˆ‘è¿˜æ²¡æœ‰å¼€å§‹çœ‹ã€‚ã€‚ã€‚å…ˆç•™ä¸ªå‘å§</li>
</ol>
</div>
</article>


<section class="comment">
  <div id="gitalk-container"></div>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
  <script>
      const gitalk = new Gitalk({
          clientID: '7d8c8c91ae6aff3e46e7',
          clientSecret: '0f0f2ea4fb6eb3067955823f06286e7d88509b9f',
          repo: 'yeqown.github.io',
          owner: 'yeqown',
          admin: ['yeqown'],
          id: "goroutine-leak-check-caused-by-grpc", 
          distractionFreeMode: false 
      });
      (function () {
          if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
              document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
              return;
          }
          gitalk.render('gitalk-container');
      })();
  </script>
</section>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">






<div class="flex align-center">
    <span id="busuanzi_container_site_pv" style="margin-right: 10px;">
        è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>
    </span>
    <span id="busuanzi_container_site_uv" style="margin-right: 10px;">
        è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>
    </span>
</div></div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#èƒŒæ™¯">èƒŒæ™¯</a></li>
        <li><a href="#pprofæ’æŸ¥">pprofæ’æŸ¥</a></li>
        <li><a href="#ä»£ç æ’æŸ¥">ä»£ç æ’æŸ¥</a></li>
        <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












