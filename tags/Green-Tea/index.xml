<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Green Tea on Yeqown</title>
    <link>https://www.yeqown.xyz/tags/Green-Tea/</link>
    <description>Recent content in Green Tea on Yeqown</description>
    <generator>Hugo</generator>
    <language>en</language>
    <lastBuildDate>Thu, 06 Nov 2025 14:09:28 +0800</lastBuildDate>
    <atom:link href="https://www.yeqown.xyz/tags/Green-Tea/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>译：The Green Tea Garbage Collector</title>
      <link>https://www.yeqown.xyz/2025/11/06/%E8%AF%91-Golang%E7%BB%BF%E8%8C%B6%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/</link>
      <pubDate>Thu, 06 Nov 2025 14:09:28 +0800</pubDate>
      <guid>https://www.yeqown.xyz/2025/11/06/%E8%AF%91-Golang%E7%BB%BF%E8%8C%B6%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;原文链接：&lt;a href=&#34;https://go.dev/blog/greenteagc&#34;&gt;The Green Tea Garbage Collector&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;Go &lt;code&gt;1.25&lt;/code&gt; 引入了一款名为 Green Tea 的新型实验性垃圾回收器，在构建时通过设置 &lt;code&gt;GOEXPERIMENT=greenteagc&lt;/code&gt; 来启用。&lt;/p&gt;&#xA;&lt;p&gt;许多工作负载在垃圾回收上花费的时间减少了约 10%，但有些工作负载的降幅高达 &lt;strong&gt;40%&lt;/strong&gt;！它已经为生产环境做好了准备，并且已经在 &lt;em&gt;Google&lt;/em&gt; 内部使用，我们鼓励您尝试一下。我们知道有些工作负载受益不多，甚至根本没有受益，因此您的反馈对于我们未来的工作至关重要。&lt;/p&gt;&#xA;&lt;p&gt;根据我们现在掌握的数据，我们计划在 Go &lt;code&gt;1.26&lt;/code&gt; 中将其作为默认设置。要报告任何问题，请提交一个新 issue。要报告任何成功案例，请回复现有的 &lt;a href=&#34;https://github.com/golang/go/issues/73581&#34;&gt;Green Tea issue&lt;/a&gt;。&lt;/p&gt;&#xA;&lt;p&gt;本文是根据 &lt;em&gt;&lt;strong&gt;Michael Knyszek&lt;/strong&gt;&lt;/em&gt; 在 &lt;em&gt;&lt;strong&gt;GopherCon 2025&lt;/strong&gt;&lt;/em&gt; 上的演讲整理而成的博客文章。一旦演讲视频在线发布，我们将更新这篇博文并附上链接。&lt;/p&gt;&#xA;&lt;h2 id=&#34;理解垃圾回收&#34;&gt;&#xA;  理解垃圾回收&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e7%90%86%e8%a7%a3%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;p&gt;在我们讨论 &lt;strong&gt;Green Tea&lt;/strong&gt; 之前，让我们先就垃圾回收达成共识。&lt;/p&gt;&#xA;&lt;h3 id=&#34;对象和指针&#34;&gt;&#xA;  对象和指针&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%af%b9%e8%b1%a1%e5%92%8c%e6%8c%87%e9%92%88&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;p&gt;垃圾回收的目的是自动回收和重用程序不再使用的内存。为此，Go 垃圾回收器关注的是 &lt;em&gt;对象&lt;/em&gt; 和 &lt;em&gt;指针&lt;/em&gt;。&lt;/p&gt;&#xA;&lt;p&gt;在 Go 运行时的上下文中，对象是其底层内存在堆上分配的 Go 值。当 Go 编译器无法确定值的生命周期时，就会在堆上分配内存。例如，以下代码片段分配了一个堆对象：一个指针切片的底层存储空间。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; = make([]&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// 全局变量&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Go 编译器无法将切片底层存储分配在堆以外的任何地方，因为它很难知道（甚至不可能知道） &lt;code&gt;x&lt;/code&gt; 会引用该对象多长时间。&lt;/p&gt;&#xA;&lt;p&gt;指针只是指示 Go 值在内存中位置的数字，Go 程序就是通过指针来引用对象的。例如，要获取上一个代码片段中分配的对象的起始地址的指针，我们可以这样写：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;] &lt;span style=&#34;color:#75715e&#34;&gt;// 0xc000104000&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;标记清除&#34;&gt;&#xA;  标记清除&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%a0%87%e8%ae%b0%e6%b8%85%e9%99%a4&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;p&gt;Go 的垃圾回收器遵循一种广义上称为&lt;em&gt;&lt;strong&gt;追踪式垃圾回收&lt;/strong&gt;&lt;/em&gt;的策略，这意味着垃圾回收器会跟随或“追踪”程序中的指针，以确定程序仍在使用的对象。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
