<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>GRPC on Yeqown</title>
    <link>https://www.yeqown.xyz/tags/gRPC/</link>
    <description>Recent content in GRPC on Yeqown</description>
    <generator>Hugo</generator>
    <language>en</language>
    <lastBuildDate>Thu, 08 May 2025 09:35:14 +0800</lastBuildDate>
    <atom:link href="https://www.yeqown.xyz/tags/gRPC/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>åœ¨ Kubernetes ä¸­å®ç° gRPC æµé‡çš„é•œåƒå’Œå¯¹æ¯”</title>
      <link>https://www.yeqown.xyz/2025/05/08/%E5%9C%A8-Kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0gRPC%E6%B5%81%E9%87%8F%E9%95%9C%E5%83%8F/</link>
      <pubDate>Thu, 08 May 2025 09:35:14 +0800</pubDate>
      <guid>https://www.yeqown.xyz/2025/05/08/%E5%9C%A8-Kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0gRPC%E6%B5%81%E9%87%8F%E9%95%9C%E5%83%8F/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä¸»è¦è§£å†³åœ¨æœåŠ¡é‡æ„è¿‡ç¨‹ä¸­å¦‚ä½•ä¿è¯æ–°æ—§æœåŠ¡è¡Œä¸ºä¸€è‡´æ€§çš„é—®é¢˜ã€‚&lt;/p&gt;&#xA;&lt;h2 id=&#34;åœºæ™¯æè¿°&#34;&gt;&#xA;  åœºæ™¯æè¿°&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%9c%ba%e6%99%af%e6%8f%8f%e8%bf%b0&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;p&gt;ç°æœ‰ä¸€ä¸ª python å¼€å‘çš„ gRPC å¾®æœåŠ¡æä¾›äº†ä¸€äº› &lt;strong&gt;æ•°æ®æŸ¥è¯¢&lt;/strong&gt; æ¥å£ ä¾› ä¸Šå±‚åº”ç”¨ä½¿ç”¨ï¼Œéšç€ä¸šåŠ¡æµé‡çš„å¢åŠ è¿ç»´è¿™ä¸ªæœåŠ¡çš„æˆæœ¬ä¹Ÿé€æ¸å¢åŠ ï¼Œä¸ºäº†é™ä½è¿ç»´æˆæœ¬å’Œæé«˜æ€§èƒ½ (æœ¨æœ‰æ“…é•¿ python é«˜æ€§èƒ½çš„å¼€å‘)ï¼Œå› æ­¤é€‰æ‹©äº†ä½¿ç”¨ go è¯­è¨€å¯¹è¿™ä¸ªæœåŠ¡è¿›è¡Œé‡å†™ã€‚åœ¨å¼€å‘å®Œæˆä¹‹åï¼Œéœ€è¦å¯¹æ–°æœåŠ¡çš„ gRPC æ¥å£è¿›è¡ŒéªŒè¯ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™ç§åœºæ™¯å¯¹æµ‹è¯•å¼€å‘äººå‘˜æ¥è¯´ï¼Œå®åœ¨æ˜¯å¤ªç†Ÿæ‚‰äº†å§ï¼Ÿå…¸å‹çš„ &lt;strong&gt;é‡æ”¾éªŒè¯&lt;/strong&gt;ï¼Œé©¬ä¸Šèƒ½æƒ³åˆ°çš„éªŒè¯æ‰‹æ®µå°±æ˜¯ï¼š&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;å¦‚æœæœ‰å­˜é‡çš„å•å…ƒæµ‹è¯•ï¼Œé‚£ä¹ˆç›´æ¥é‡æ–°è·‘ä¸€éå•å…ƒæµ‹è¯•å°±èƒ½å¿«é€Ÿçš„å®ŒæˆéªŒè¯ã€‚&lt;/li&gt;&#xA;&lt;li&gt;æ²¡æœ‰å•å…ƒæµ‹è¯•çš„æƒ…å†µï¼Œé‚£ä¹ˆå¯ä»¥å°†æ–°æœåŠ¡éƒ¨ç½²èµ·æ¥ï¼Œé€šè¿‡æµé‡å¤åˆ¶çš„æ–¹å¼å°†æ—§æœåŠ¡çš„æµé‡å¤åˆ¶åˆ°æ–°æœåŠ¡ä¸Šï¼Œç„¶åå¯¹æ¯”ä¸¤ä¸ªæœåŠ¡çš„è¿”å›ç»“æœæ˜¯å¦ä¸€è‡´ã€‚&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&#xA;&#xA;&lt;script src=&#34;https://www.yeqown.xyz/mermaid.min.js&#34;&gt;&lt;/script&gt;&#xA;&#xA;  &lt;script&gt;mermaid.initialize({&#xA;  &#34;flowchart&#34;: {&#xA;    &#34;useMaxWidth&#34;:true&#xA;  },&#xA;  &#34;theme&#34;: &#34;default&#34;&#xA;}&#xA;)&lt;/script&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;pre class=&#34;mermaid&#34;&gt;&#xA;flowchart LR&#xA;    %% å®šä¹‰å¸ƒå±€æ–¹å‘å’Œé—´è·&#xA;    subgraph s1[&#34;æ–¹æ¡ˆä¸€: å•å…ƒæµ‹è¯•éªŒè¯&#34;]&#xA;        direction TB&#xA;        UT[å•å…ƒæµ‹è¯•] --&gt;|æ‰§è¡Œ| NS1[æ–°æœåŠ¡]&#xA;    end&#xA;    &#xA;    subgraph s2[&#34;æ–¹æ¡ˆäºŒ: æµé‡å¤åˆ¶éªŒè¯&#34;]&#xA;        direction TB&#xA;        C[å®¢æˆ·ç«¯] --&gt;|è¯·æ±‚| OS[æ—§æœåŠ¡]&#xA;        OS --&gt;|å“åº”| C&#xA;        OS --&gt;|å¤åˆ¶æµé‡| NS2[æ–°æœåŠ¡]&#xA;        NS2 --&gt;|å¯¹æ¯”å“åº”| OS&#xA;    end&#xA;&#xA;    %% è®¾ç½®å¸ƒå±€æ–¹å‘å’Œå¯¹é½æ–¹å¼&#xA;    s1 ~~~ s2&#xA;&lt;/pre&gt;&#xA;&#xA;&lt;p&gt;ä½†æ˜¯å¾ˆé—æ†¾ ğŸ˜­ï¼Œå¹¶æ²¡æœ‰æˆç†Ÿçš„å•å…ƒæµ‹è¯•ï¼›æµ‹è¯•äººå‘˜ä¹Ÿéƒ½æ˜¯äººè‚‰æµ‹è¯•ï¼Œå¯¹äºå†…éƒ¨æœåŠ¡çš„æ¥å£éªŒè¯å¸®åŠ©ä¸å¤§ï¼Œå› æ­¤è¿™é‡Œé‡‡ç”¨ç¬¬äºŒç§æ–¹å¼è¿›è¡ŒéªŒè¯ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>protoc-gen-fieldmaskæ’ä»¶</title>
      <link>https://www.yeqown.xyz/2022/01/25/protoc-gen-fieldmask%E6%8F%92%E4%BB%B6/</link>
      <pubDate>Tue, 25 Jan 2022 13:46:36 +0800</pubDate>
      <guid>https://www.yeqown.xyz/2022/01/25/protoc-gen-fieldmask%E6%8F%92%E4%BB%B6/</guid>
      <description>&lt;h3 id=&#34;èƒŒæ™¯&#34;&gt;&#xA;  èƒŒæ™¯&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e8%83%8c%e6%99%af&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;p&gt;gRPC ä½œä¸ºæœåŠ¡ç«¯çš„å¸¸ç”¨æ¡†æ¶ï¼Œå®ƒé€šè¿‡ protocol-buffers è¯­è¨€æ¥å®šä¹‰æœåŠ¡ï¼ŒåŒæ—¶ä¹Ÿçº¦å®šäº†è¯·æ±‚å’Œå“åº”çš„æ ¼å¼ï¼Œè¿™æ ·åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´å°±å¯ä»¥é€šè¿‡ protoc ç”Ÿæˆçš„ä»£ç ç›´æ¥è¿è¡Œè€Œä¸ç”¨è€ƒè™‘ç¼–ç ä¼ è¾“é—®é¢˜äº†ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä½†æ˜¯ï¼Œå¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;RPC å“åº”ä¸­ &lt;strong&gt;&lt;em&gt;æ— ç”¨çš„å­—æ®µè¿‡å¤š&lt;/em&gt;&lt;/strong&gt; , æµªè´¹å¸¦å®½å’Œæ— æ•ˆè®¡ç®—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;è¿™é‡Œçš„æ— ç”¨å­—æ®µæ˜¯æŒ‡ï¼Œåœ¨å“åº”ä¸­ï¼Œæ²¡æœ‰ç”¨åˆ°çš„å­—æ®µï¼Œè¿™äº›å­—æ®µå¯ä»¥å¿½ç•¥æ‰ï¼Œä¸ä¼šå½±å“å®¢æˆ·ç«¯çš„ä½¿ç”¨ã€‚&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;  &lt;img src=&#34;https://www.yeqown.xyz/images/fieldmask-case1.jpg&#34;&gt;&#xA;&lt;p&gt;æˆ–è®¸ &lt;strong&gt;æ‹†åˆ†æ¥å£&lt;/strong&gt; æ˜¯ä¸€ä¸ªå¥½çš„åŠæ³•ï¼Œä½†æ˜¯å¯èƒ½ä¼šå› ä¸ºè¿™æ ·é‚£æ ·çš„åŸå› ï¼ˆä¿¡æ¯ç²’åº¦é™ä½å¯¼è‡´æ¥å£å¤ªå¤šäº†ï¼Œæœ‰äº›åœ°æ–¹å°±æ˜¯éœ€è¦èšåˆä¿¡æ¯ï¼›ç»†ç²’åº¦çš„APIè®¾è®¡åŒæ—¶ä¼šå¯¼è‡´ä»£ç é‡å¤å¢åŠ ï¼‰ï¼Œå¯èƒ½æ— æ³•æ¨åŠ¨æ‹†åˆ†æ”¹é€ ã€‚åŒæ—¶å¦‚æœæ²¡æœ‰æ‹†åˆ†æ ‡å‡†ï¼Œäº¦æˆ–å›¢é˜Ÿå†…æˆå‘˜ä¸èƒ½ä¸¥æ ¼éµå®ˆæ ‡å‡†ï¼Œé‚£ä¹ˆæ‹†åˆ†ä¹Ÿåªæ˜¯é‡å¤é—®é¢˜è€Œå·²ã€‚&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;RPC å¢é‡æ›´æ–°æ—¶ï¼Œå¦‚ä½•åˆ¤æ–­é›¶å€¼å­—æ®µæ˜¯å¦éœ€è¦æ›´æ–°ï¼Ÿ&lt;/p&gt;&#xA;&lt;p&gt;å¯¹äº unset å’Œ zero value ä¸å¥½åŒºåˆ†çš„è¯­è¨€ä¸­ï¼ˆæ¯”å¦‚ï¼šgoï¼‰ï¼Œåœ¨æä¾›æœåŠ¡çš„ä¸€æ–¹é‡åˆ° &lt;strong&gt;&lt;em&gt;å¢é‡æ›´æ–°&lt;/em&gt;&lt;/strong&gt; çš„åœºæ™¯æ—¶å°±ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼š&lt;/p&gt;&#xA;&lt;p&gt;å¯¹äºè¿™ç§æƒ…å†µå½“ç„¶å¯ä»¥ä¹Ÿæœ‰ä¸€äº›æ–¹æ³•æ¥è§£å†³ï¼Œæ¯”å¦‚ï¼š&lt;strong&gt;ä½¿ç”¨æŒ‡é’ˆæ¥å®šä¹‰æ•°æ®åŸºæœ¬ç±»å‹&lt;/strong&gt;ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨çš„æ—¶å€™å¦‚æœåˆ¤å®šä¸º &lt;code&gt;nil&lt;/code&gt; å°±è¯´æ˜æ²¡æœ‰è®¾ç½®ï¼Œå¦‚æœä¸ä¸º &lt;code&gt;nil&lt;/code&gt; ä¸”ä¸ºé›¶å€¼ï¼Œé‚£ä¹ˆå°±è¯´æ˜ä¹Ÿæ˜¯éœ€è¦æ›´æ–°çš„ã€‚ä¸è¿‡è¿™æ ·è§£å†³çš„ç¼ºç‚¹å°±æ˜¯ï¼Œ&lt;code&gt;nil refference panic&lt;/code&gt; çš„æ¦‚ç‡åˆå¢åŠ äº†ï¼Œåœ¨ä½¿ç”¨æ—¶ä¹Ÿç¨å¾®éº»çƒ¦äº†ä¸€ç‚¹ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://www.yeqown.xyz/images/fieldmask-case2.jpg&#34;&gt;Â·&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;è§£å†³æ–¹æ¡ˆ&#34;&gt;&#xA;  è§£å†³æ–¹æ¡ˆ&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;p&gt;å…¶å®æˆ‘ä»¬åœ¨æ€è€ƒä¸Šè¿°ä¸¤ç§åœºæ™¯çš„æ—¶å€™ï¼ŒæŠŠ &lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt; å’Œ &lt;strong&gt;æœåŠ¡ç«¯&lt;/strong&gt; çš„è§’è‰²æå–å‡ºæ¥ï¼Œå°±ä¼šå‘ç°è¿™ä¸¤ä¸ªåœºæ™¯éƒ½æ˜¯ä» &lt;strong&gt;æœåŠ¡ç«¯&lt;/strong&gt; çš„è§†è§’é‡åˆ°çš„é—®é¢˜ï¼Œä¸¤ä¸ªåœºæ™¯éƒ½æ˜¯ç±»ä¼¼çš„ï¼š&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;å®¢æˆ·ç«¯éœ€è¦å“ªäº›å­—æ®µï¼ŒæœåŠ¡ç«¯ä¸çŸ¥é“&lt;/li&gt;&#xA;&lt;li&gt;å®¢æˆ·ç«¯æ›´æ–°äº†å“ªäº›å­—æ®µï¼ŒæœåŠ¡ç«¯ä¹Ÿä¸çŸ¥é“&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;ä½†æ˜¯ï¼Œå…¶å®å®¢æˆ·ç«¯æ˜¯çŸ¥é“çš„ï¼Œå› æ­¤è®©å®¢æˆ·ç«¯æŠŠè¿™éƒ¨åˆ†ä¿¡æ¯ä¼ é€’ç»™æœåŠ¡ç«¯å°±è¡Œäº†ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨ &lt;a href=&#34;&#34;&gt;FieldMask&lt;/a&gt; å­—æ®µï¼Œç”¨æ¥ä¼ é€’å®¢æˆ·ç«¯éœ€è¦çš„å­—æ®µï¼ŒæœåŠ¡ç«¯å°±åªè¿”å›éœ€è¦çš„å­—æ®µï¼›å®¢æˆ·ç«¯çš„å‘Šè¯‰æœåŠ¡ç«¯éœ€è¦å“ªäº›å­—æ®µï¼ŒæœåŠ¡ç«¯å°±æ›´æ–°å“ªäº›å­—æ®µã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä½†æ˜¯ &lt;code&gt;FieldMask&lt;/code&gt; åªæ˜¯ä¸€ä¸ªå®šä¹‰ï¼Œåœ¨å…·ä½“çš„ä½¿ç”¨åœºæ™¯ä¸­è¿˜éœ€è¦å¼€å‘è€…è‡ªå·±ç¼–å†™ä¸€äº›è¾…åŠ©æ–¹æ³•ï¼Œæ¥å®ç°åŠŸèƒ½ã€‚é‚£ä¹ˆæ˜¯ä¸æ˜¯å¯ä»¥æä¾›ä¸€ä¸ªæ’ä»¶ï¼Œè®©å¼€å‘è€…å¯ä»¥åªç¼–å†™ &lt;code&gt;proto&lt;/code&gt; æ–‡ä»¶ï¼Œä¾¿å¯ä»¥è‡ªåŠ¨ç”Ÿæˆä¸€äº›è¾…åŠ©æ–¹æ³•å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œé¢„è§ˆæ•ˆæœå¦‚ä¸‹ï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UserInfoRequest&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; user_id &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  google.protobuf.FieldMask field_mask &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; [&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;    (fieldmask.option.Option)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;in &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {gen&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;},&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;    (fieldmask.option.Option)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {gen&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;, message&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UserInfoResponse&amp;#34;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  ];&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Address&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; country &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; province &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UserInfoResponse&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; user_id &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; email &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;Â·&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  Address address &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NonEmpty&lt;/span&gt; {}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;service&lt;/span&gt; UserInfo {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;rpc&lt;/span&gt; GetUserInfo(UserInfoRequest) &lt;span style=&#34;color:#66d9ef&#34;&gt;returns&lt;/span&gt; (UserInfoResponse) {}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;rpc&lt;/span&gt; UpdateUserInfo(UserInfoRequest) &lt;span style=&#34;color:#66d9ef&#34;&gt;returns&lt;/span&gt; (NonEmpty) {}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”Ÿæˆçš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>Kubernetesä¸­gRPC Load Balancingåˆ†æå’Œè§£å†³</title>
      <link>https://www.yeqown.xyz/2020/09/22/Kubernetes%E4%B8%ADgRPC-Load-Balancing%E5%88%86%E6%9E%90%E5%92%8C%E8%A7%A3%E5%86%B3/</link>
      <pubDate>Tue, 22 Sep 2020 13:33:20 +0800</pubDate>
      <guid>https://www.yeqown.xyz/2020/09/22/Kubernetes%E4%B8%ADgRPC-Load-Balancing%E5%88%86%E6%9E%90%E5%92%8C%E8%A7%A3%E5%86%B3/</guid>
      <description>&lt;h3 id=&#34;èƒŒæ™¯&#34;&gt;&#xA;  èƒŒæ™¯&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e8%83%8c%e6%99%af&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;p&gt;ç¬¬ä¸€æ¬¡ï¼Œçº¿ä¸Šé‡åˆ°å¤§é‡æ¥å£RTè¶…è¿‡10sè§¦å‘äº†ç³»ç»Ÿå‘Šè­¦ï¼Œè¿ç»´åé¦ˆk8sé›†ç¾¤æ— å¼‚å¸¸ï¼Œè´Ÿè½½æ— æ˜æ˜¾ä¸Šå‡ã€‚å°†æŠ¥è­¦æ¥å£ç›¸å…³çš„æœåŠ¡é‡å¯ä¸€ç•ªåå‘ç°å¹¶æ— æ”¹å–„ã€‚ä½†æ˜¯å¼€å‘äººå‘˜ä½¿ç”¨é“¾è·¯è¿½è¸ªç³»ç»Ÿå‘ç°ï¼Œæ¯”è¾ƒæ…¢çš„è¯·æ±‚æ€»æ˜¯æŸä¸ªgRPCæœåŠ¡ä¸­çš„å‡ ä¸ªPODå¯¼è‡´ï¼Œç”±å…¶ä»–PODå¤„ç†çš„è¯·æ±‚å¹¶ä¸ä¼šå‡ºç°è¶…æ—¶å‘Šè­¦ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ç¬¬äºŒæ¬¡ï¼ŒåŒæ ·é‡åˆ°æ¥å£RTè¶…è¿‡é˜ˆå€¼è§¦å‘å‘Šè­¦ï¼Œä»k8sä¸­æŸ¥åˆ°æŸä¸ªgRPCæœåŠ¡ï¼ˆå…³é”®æœåŠ¡ï¼‰é‡å¯æ¬¡æ•°å¼‚å¸¸ï¼ŒæŸ¥çœ‹é‡å¯åŸå› æ—¶å‘ç°æ˜¯&lt;code&gt;OOM Killed&lt;/code&gt;ï¼Œ&lt;code&gt;OOM killed&lt;/code&gt;å¹¶ä¸æ˜¯è´Ÿè½½ä¸å‡è¡¡ç›´æ¥å¯¼è‡´çš„ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€å®šçš„å…³ç³»ï¼Œè¿™ä¸ªåé¢å†è¯´ã€‚å‰ä¸¤æ¬¡ç”±äºç›‘æ§ä¸å¤Ÿå®Œå–„ï¼ˆäºæˆ‘è€Œè¨€ï¼Œè¿ç»´çš„å¾ˆå¤šé¢æ¿éƒ½æ²¡æœ‰æƒé™ï¼Œæ²¡åŠæ³•æ’æŸ¥ï¼‰ã€‚æœŸé—´åˆ©ç”¨pprofåˆ†æäº†è¯¥æœåŠ¡å†…å­˜æ³„æ¼ç‚¹ï¼Œå¹¶ä¿®å¤ä¸Šçº¿è§‚å¯Ÿã€‚ç»è¿‡ç¬¬äºŒæ¬¡é—®é¢˜å¹¶è§£å†³ä¹‹åï¼Œçº¿ä¸Šè¶…æ—¶å‘Šè­¦æ¢å¤æ­£å¸¸æ°´å¹³ï¼Œä½†æ˜¯è¯¥ deployment ä¸‹çš„å‡ ä¸ªPODå ç”¨èµ„æºï¼ˆMem / CPU / Network-IOï¼‰ï¼Œå·®è·ç”šå¤§ã€‚&lt;/p&gt;&#xA;&lt;img src=&#34;https://www.yeqown.xyz/images/k8s-grpc-lb-mem1.jpg&#34;/&gt;&#xA;&lt;img src=&#34;https://www.yeqown.xyz/images/k8s-grpc-lb-mem2.jpg&#34;/&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;ç¬¬äºŒå¼ å›¾æ˜¯è¿ç»´ç¬¬ä¸€æ¬¡å‘ç°è¯¥æœåŠ¡OOM killed ä¹‹åè°ƒæ•´äº†å†…å­˜ä¸Šé™ä» 512MB =&amp;gt; 1Gï¼Œç„¶è€Œåªæ˜¯è®©å®ƒæ­»å¾—æ…¢ä¸€ç‚¹è€Œå·²ã€‚&#xA;ä»ä¸Šé¢ä¸¤å¼ å›¾èƒ½å¤ŸçŸ³é”¤çš„æ˜¯è¯¥æœåŠ¡ä¸€å®šå­˜åœ¨å†…å­˜æ³„æ¼ã€‚Goé¡¹ç›®å†…å­˜å ç”¨çš„åˆ†æï¼Œæˆ‘æ€»ç»“äº†å¦‚ä¸‹çš„æ’æŸ¥æ­¥éª¤ï¼š&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;1. ä»£ç æ³„æ¼ï¼ˆpprofï¼‰ï¼ˆå¯èƒ½åŸå›  goroutineæ³„æ¼ï¼›é—­åŒ…ï¼‰&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;2. Go Runtime + Linux å†…æ ¸ï¼ˆRSSè™šé«˜å¯¼è‡´OOMï¼‰https://github.com/golang/go/issues/23687&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;3. é‡‡é›†æŒ‡æ ‡ä¸æ­£å¸¸ï¼ˆcontainer_memory_working_set_bytesï¼‰&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;2ï¼Œ3 æ˜¯åŸºäºç¬¬1ç‚¹èƒ½åŸºæœ¬æ’é™¤ä»£ç é—®é¢˜çš„åç»­æ­¥éª¤ã€‚&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;è§£å†³å’Œæ’æŸ¥æ‰‹æ®µï¼š&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;1. pprof é€šè¿‡heap + goroutine æ˜¯å¦å¼‚å¸¸ï¼Œæ¥å®šä½æ³„æ¼ç‚¹&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;è¿è¡Œ&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;go tool pprof&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;å‘½ä»¤æ—¶åŠ ä¸Š--nodefration&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;0.05å‚æ•°ï¼Œè¡¨ç¤ºå¦‚æœè°ƒç”¨çš„å­å‡½æ•°ä½¿ç”¨çš„CPUã€memoryä¸è¶…è¿‡ 5%ï¼Œå°±å¿½ç•¥å®ƒã€‚&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;2. ç¡®è®¤goç‰ˆæœ¬å’Œå†…æ ¸ç‰ˆæœ¬ï¼Œç¡®è®¤æ˜¯å¦å¼€å¯äº†MADV_FREEï¼Œå¯¼è‡´RSSä¸‹é™ä¸åŠæ—¶&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;1.12+ å’Œ linuxå†…æ ¸ç‰ˆæœ¬å¤§äº 4.5&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;ã€‚&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;3.  RSS + Cache å†…å­˜æ£€æŸ¥&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; Cache è¿‡å¤§çš„åŸå›  https://www.cnblogs.com/zh94/p/11922714.html &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;// IOå¯†é›†ï¼šæ‰‹åŠ¨é‡Šæ”¾æˆ–è€…å®šæœŸé‡å¯&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;æŸ¥çœ‹æœåŠ¡å™¨å†…å­˜ä½¿ç”¨æƒ…å†µï¼š &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;free -g&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;æŸ¥çœ‹è¿›ç¨‹å†…å­˜æƒ…å†µï¼š      &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;pidstat -rI -p 13744&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶ï¼š    &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;lsof -p 13744&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;æŸ¥çœ‹å®¹å™¨å†…çš„PIDï¼š      &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;docker inspect --format &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;{{ .State.Pid}}&amp;#34;&lt;/span&gt; 6e7efbb80a9d&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;æŸ¥çœ‹è¿›ç¨‹æ ‘ï¼Œæ‰¾åˆ°ç›®æ ‡:   &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;pstree -p 13744&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;å‚è€ƒï¼šhttps://eddycjy.com/posts/why-container-memory-exceed/&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæˆ‘å‘ç°äº†è¯¥PODè¢«&lt;code&gt;OOM killed&lt;/code&gt;è¿˜æœ‰å¦ä¸€ä¸ªå…ƒå‡¶å°±æ˜¯ï¼Œ&lt;strong&gt;æ—¥å¿—æ–‡ä»¶å ç”¨&lt;/strong&gt;ã€‚è¿™é‡Œå°±ä¸è¿‡å¤šçš„è¯¦è¿°äº†ï¼Œæœç´¢æ–¹å‘æ˜¯ â€œä¸€ä¸ªè¿è¡Œä¸­ç¨‹åºåœ¨å†…å­˜ä¸­å¦‚ä½•ç»„ç»‡ + Cacheå†…å­˜æ˜¯ç”±å“ªäº›éƒ¨åˆ†æ„æˆçš„â€ã€‚è¿™éƒ¨åˆ†è¦è¾¾åˆ°çš„ç›®æ ‡æ˜¯ï¼šä¸€ä¸ªç¨‹åºè¿è¡Œèµ·æ¥å®ƒä¸ºä»€ä¹ˆå ç”¨äº†è¿™ä¹ˆäº›å†…å­˜ï¼Œè€Œä¸æ˜¯æ›´å¤šæˆ–è€…æ›´å°‘ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>ä¸€æ¬¡gRPCä½¿ç”¨ä¸å½“å¯¼è‡´goroutineæ³„æ¼æ’æŸ¥è®°å½•</title>
      <link>https://www.yeqown.xyz/2020/01/17/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%8E%92%E6%9F%A5gRPC%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84goroutine%E6%B3%84%E6%BC%8F/</link>
      <pubDate>Fri, 17 Jan 2020 13:20:17 +0800</pubDate>
      <guid>https://www.yeqown.xyz/2020/01/17/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%8E%92%E6%9F%A5gRPC%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84goroutine%E6%B3%84%E6%BC%8F/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;ç”±äºä¿ç•™å¿…è¦çš„â€œç½ªè¯â€ï¼Œå› æ­¤æŸäº›å¼‚å¸¸åªèƒ½é€šè¿‡æ–‡å­—æ¥æè¿°äº†ï½&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h3 id=&#34;èƒŒæ™¯&#34;&gt;&#xA;  èƒŒæ™¯&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e8%83%8c%e6%99%af&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;p&gt;æ˜¨æ™šä¸Š10ç‚¹å·¦å³ï¼Œå‰ç«¯ç«¥é‹åæ˜ å¼€å‘ç¯å¢ƒæ¥å£å“åº”è¶…æ—¶ï¼Œä½†è¿‡äº†å‡ åˆ†é’Ÿååˆæ¢å¤äº†ï¼Œäºæ˜¯æœ‰äº†è¿™ä¸€ç¯‡æ–‡ç« ã€‚&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;å…¶å®å¾ˆä¹…ä»¥å‰å°±å‡ºç°äº†å†…å­˜å ç”¨å¼‚å¸¸çš„æƒ…å†µï½ï¼Œåªæ˜¯å ç”¨å¹¶ä¸é«˜ä¹Ÿå°±æ˜¯50MBå·¦å³ï¼ŒåŠ ä¸Šå½“æ—¶è¿˜å¿™ç€å†™ä¸šåŠ¡éœ€æ±‚å°±æ²¡æœ‰æ€¥ç€åŠ ä¸Špprofæ¥æ£€æŸ¥ã€‚&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;é¦–å…ˆé€šè¿‡&lt;code&gt;è¿ç»´å¹³å°(k8s based)&lt;/code&gt;ç›´è§‚å‘ç°äº†è¯¥podæ•°é‡ä»1å˜æˆäº†2, å†ç»“åˆæ–°å¢podçš„å¯åŠ¨æ—¶é—´ï¼Œæˆ‘å‘ç°è¯¥æ—¶é—´æ­£å¥½æ˜¯å‰ç«¯ç«¥é‹åæ˜ çŠ¶å†µçš„æ—¶é—´èŠ‚ç‚¹ï¼Œç¨åæˆ‘æ£€æŸ¥äº†ä¸‹è¯¥æœåŠ¡çš„èµ„æºé™åˆ¶å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;&#xA;&lt;img src=&#34;https://www.yeqown.xyz/images/pprof-goroutine-leak-1.png&#34;/&gt;&#xA;&lt;p&gt;é‚£ä¹ˆå‰ç«¯ç«¥é‹åæ˜ çš„é—®é¢˜å°±å¾ˆæ˜æ˜¾äº†ï¼Œç”±äºæŸç§åŸå› å¯¼è‡´äº†podå†…å­˜è¶…é™ï¼Œè§¦å‘äº†è¿ç»´å¹³å°å¯¹äºå†…å­˜è¶…é™çš„â€œå®¹å¿æœºåˆ¶â€ã€‚è¡¨ç°ä¸º: æ–°å¢ä¸€ä¸ªpodç”¨äºç¼“è§£æœåŠ¡å‹åŠ›ï¼Œè€æœåŠ¡ç”±äºæ— æ³•ç”³è¯·æ›´å¤šå†…å­˜ä¼šå¯¼è‡´å´©æºƒæˆ–å…¶ä»–å¼‚å¸¸ï¼ˆæ— æ³•å“åº”å®¢æˆ·ç«¯è¯·æ±‚ï¼‰ï¼Œè¿™ä¸åæ˜ çš„æƒ…å†µä¸€è‡´ã€‚&lt;/p&gt;&#xA;&lt;img src=&#34;https://www.yeqown.xyz/images/pprof-goroutine-leak-3.png&#34;/&gt;&#xA;&lt;h3 id=&#34;pprofæ’æŸ¥&#34;&gt;&#xA;  pprofæ’æŸ¥&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#pprof%e6%8e%92%e6%9f%a5&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;p&gt;çŸ¥é“äº†æœåŠ¡å†…å­˜å¼‚å¸¸ï¼Œæƒ³è¦å…·ä½“å®šä½çš„è¯ï¼Œè¿™æ—¶å€™å°±éœ€è¦pprofä¸Šåœºäº†ã€‚&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;å¦‚æœä½ éœ€è¦é‡å¯æœåŠ¡æ‰èƒ½å¼€å¯pprofçš„è¯ï¼Œé‚£ä¹ˆåªèƒ½ç­‰å¾…å¤ç°äº†ã€‚è¿™é‡Œæˆ‘åœ¨å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒä¸€ç›´å¼€å¯äº†pprofï¼Œå› æ­¤å¯ä»¥ç›´æ¥æ£€æŸ¥ã€‚ä¸ªäººè§‰å¾—ï¼Œè¿™æ ·è¿˜å¯ä»¥å¸®åŠ©å¼€å‘å’Œæµ‹è¯•ï¼Œå®Œæˆæœ€åˆçš„æ€§èƒ½åˆ†æğŸ˜¼ã€‚&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h4 id=&#34;å†…å­˜æ£€æŸ¥&#34;&gt;&#xA;  å†…å­˜æ£€æŸ¥&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%86%85%e5%ad%98%e6%a3%80%e6%9f%a5&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;go tool pprof --http&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;:8080 https://service.host.com/debug/pprof/heap&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªå‘½ä»¤æ˜¯åœ¨æœ¬åœ°æ‰“å¼€ä¸€ä¸ªwebæœåŠ¡ï¼Œç›´æ¥å¯è§†åŒ–è¯¥æœåŠ¡çš„å†…å­˜å ç”¨æƒ…å†µã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨:&lt;/p&gt;&#xA;&lt;p&gt;&lt;code&gt;go tool pprof https://service.host.com/debug/pprof/heap&lt;/code&gt; ä½¿ç”¨äº¤äº’æ¨¡å¼æ¥åˆ†æã€‚é€šè¿‡è¿™ä¸ªæ­¥éª¤å®šä½åˆ°äº† grpcç›¸å…³çš„åŒ…å†…å­˜å ç”¨å¼‚å¸¸åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;50MB+ google.golang.org/grpc/internal/transport.newBufWriter&#xA;50MB+ bufio.NewReaderSize&#xA;http2 ç›¸å…³åº“çš„å ç”¨ä¹Ÿæ¯”è¾ƒå¤š&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸€åˆ‡éƒ½æŒ‡å‘äº†æˆ‘ä»¬ä½¿ç”¨çš„gRPCï¼Œå¯æ˜¯ä¸ºå•¥ä½¿ç”¨gRPCä¼šç”¨åˆ°è¿™ä¹ˆâ€œå¤šâ€å†…å­˜å‘¢ï¼Ÿæ¥ç€åˆ†æ&lt;/p&gt;&#xA;&lt;h4 id=&#34;goroutineæ£€æŸ¥&#34;&gt;&#xA;  goroutineæ£€æŸ¥&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#goroutine%e6%a3%80%e6%9f%a5&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h4&gt;&#xA;&lt;p&gt;æ‰“å¼€ä¸€çœ‹ &lt;strong&gt;&lt;a href=&#34;https://service.host.com/debug/pprof/&#34;&gt;https://service.host.com/debug/pprof/&lt;/a&gt;&lt;strong&gt;ä¸€çœ‹ï¼Œgoroutineå’Œheapå±…â€œé«˜â€(4000+)ä¸ä¸‹ï¼Œè™½ç„¶å¯¹äºåŠ¨è¾„10W+çš„åˆ«äººå®¶çš„æœåŠ¡æ¥è¯´ï¼Œè¿™ç‚¹æ ¹æœ¬ä¸ç®—äº‹ï¼Œä½†åœ¨æˆ‘ä»¬è¿™ç§å°ä½œåŠé‡Œå¯å°±ç®—å¼‚å¸¸äº†ã€‚ç‚¹å¼€çœ‹goroutineæŸ¥çœ‹è¯¦æƒ…ï¼Œæœ‰å››ä¸ªéƒ¨åˆ†çš„goroutineåˆ†åˆ«æœ‰900ä¸ªå·¦å³ï¼Œè¿™é‡Œå°±ç®—åˆæ­¥å®šä½äº†&lt;/strong&gt;â€œgRPCå®¢æˆ·ç«¯ä½¿ç”¨äº†è¾ƒå¤šçš„goroutineï¼Œä½†æ˜¯å´æ²¡æœ‰æ­£ç¡®çš„ç»“æŸæ‰â€&lt;/strong&gt;ï¼Œå¦‚ä¸‹å›¾ï¼ˆè¿™æ˜¯è§£å†³åçš„æˆªçš„å›¾ï¼‰ï¼š&lt;/p&gt;&#xA;&lt;img src=&#34;https://www.yeqown.xyz/images/pprof-goroutine-leak-2.jpg&#34;/&gt;&#xA;&lt;h4 id=&#34;pprofæ€»ç»“&#34;&gt;&#xA;  pprofæ€»ç»“&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#pprof%e6%80%bb%e7%bb%93&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h4&gt;&#xA;&lt;p&gt;æœåŠ¡ä¸­ä½¿ç”¨çš„gRPCå®¢æˆ·ç«¯å‡ºäº†æŸäº›æ•…éšœï¼Œå¯¼è‡´äº†goroutineæ³„æ¼ï¼Œå¼•å‘äº†OOMï¼ˆOut Of Memoryï¼‰ã€‚å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;&#xA;&lt;img src=&#34;https://www.yeqown.xyz/images/pprof-goroutine-leak-3.png&#34;/&gt;&#xA;&lt;h3 id=&#34;ä»£ç æ’æŸ¥&#34;&gt;&#xA;  ä»£ç æ’æŸ¥&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e4%bb%a3%e7%a0%81%e6%8e%92%e6%9f%a5&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;p&gt;ä¸Šä¸€æ­¥å·²ç»å®šä½åˆ°æ˜¯gRPCå®¢æˆ·ç«¯çš„é—®é¢˜ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥ä»ä»£ç ä¸Šæ‰‹äº†ã€‚æˆ‘å¿ƒé‡Œå·²ç»æœ‰ä¸€ä¸ªâ€œå«Œç–‘çŠ¯â€äº†ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; (&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;defaultHandler&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;timeout&lt;/span&gt;        = &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// _              pb.UserServiceClient = &amp;amp;handler{}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Init of usersvc.handler&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Init&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rpcAddr&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// ... ç•¥å»ä¸è¡¨&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// rpc configs&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;rpcAddr&lt;/span&gt;          &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;client&lt;/span&gt;           &lt;span style=&#34;color:#a6e22e&#34;&gt;pb&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;UserServiceClient&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;lastGrpcReqError&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;connectRPC&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;client&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lastGrpcReqError&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// è¿™é‡Œåˆ¤æ–­çš„æœ¬æ„æ˜¯ï¼šå¦‚æœå®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥ï¼Œ&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// æˆ–è€…æœŸé—´å› ä¸ºå¼‚å¸¸æƒ…å†µï¼Œå¯¼è‡´å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯è¿æ¥ä¸­æ–­çš„æƒ…å†µä¸‹å°è¯•é‡è¿ã€‚&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// ä½†æ˜¯å¿½ç•¥äº†gRPCå®ç°ä¸­ï¼Œå¯¹äºå®¢æˆ·ç«¯çš„å¤„ç†ï¼š&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// 1. grpc.Dail æ˜¯å¼‚æ­¥çš„&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// 2. grpc æœ‰è‡ªå·±çš„é‡è¿æœºåˆ¶&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// è¿™ä¸€éƒ¨åˆ†æˆ‘è¿˜æ²¡æœ‰çœ‹å®Œï¼Œå°±ä¸ä¹±å‘è¡¨çœ‹æ³•äº†ã€‚&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;conn&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;grpc&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Dial&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;rpcAddr&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;grpc&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WithInsecure&lt;/span&gt;())&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;logger&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Std&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Errorf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;could not dial: %s with err: %v&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;rpcAddr&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;logger&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Std&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Infof&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;usersvc.client.connectRPC called&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;client&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;pb&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewUserServiceClient&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;conn&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// QueryBasicInfoByID based default Handler .&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;QueryBasicInfoByID&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;pb&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ByIDForm&lt;/span&gt;) (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;pb&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;BasicInfoResponse&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;defaultHandler&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;connectRPC&lt;/span&gt;()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;cancel&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WithTimeout&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Background&lt;/span&gt;(), &lt;span style=&#34;color:#a6e22e&#34;&gt;timeout&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cancel&lt;/span&gt;()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;resp&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;defaultHandler&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;client&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;QueryBasicInfoByID&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;in&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;defaultHandler&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lastGrpcReqError&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;resp&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æŠ›å¼€æœ¬æ„ä¸è°ˆï¼Œè¿™æ ·çš„å†™æ³•ä¹Ÿæ˜¯ä¸OKçš„ã€‚ã€‚ã€‚å› ä¸º&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
