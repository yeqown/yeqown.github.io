<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://www.yeqown.xyz/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">
  <meta property="og:site_name" content="Yeqown">
  <meta property="og:title" content="技术总结">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">
<title>技术总结 | Yeqown</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="https://www.yeqown.xyz/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">
<link rel="stylesheet" href="/book.min.c2fbf3db843e2f212ac724c116ea0973ae0c44d9926b1c14e16b29de812a6dc5.css" integrity="sha256-wvvz24Q&#43;LyEqxyTBFuoJc64MRNmSaxwU4Wsp3oEqbcU=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.38acbfa5730860fb2f583635d275e043feb2eae8ec219fbb38dc639f42eb6855.js" integrity="sha256-OKy/pXMIYPsvWDY10nXgQ/6y6ujsIZ&#43;7ONxjn0LraFU=" crossorigin="anonymous"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <meta name="referrer" content="no-referrer-when-downgrade"><link rel="alternate" type="application/rss+xml" href="https://www.yeqown.xyz/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/index.xml" title="Yeqown" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Yeqown</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>







  
<ul>
  
  <li>
    <a href="/categories"  target="_blank" rel="noopener">
        Categories
      </a>
  </li>
  
  <li>
    <a href="/tags"  target="_blank" rel="noopener">
        Tags
      </a>
  </li>
  
</ul>










  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/aboutme/" class="">About Me</a>
  

        </li>
      
    
  </ul>














</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>技术总结</h3>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav>
  <ul>
  
    
    <li class="book-section-flat">
      <strong>Categories</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">技术总结</a>
          <span>32</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/Kubernetes/">Kubernetes</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a>
          <span>6</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/Service-Mesh/">Service Mesh</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/Golang/">Golang</a>
          <span>11</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/design/">Design</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/Tracing/">Tracing</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/Algorithm/">Algorithm</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/DevOps/">DevOps</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/Test/">Test</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">常用命令</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
    
    <li class="book-section-flat">
      <strong>Tags</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/tags/Debezium/">Debezium</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Incremental-Snapshot/">Incremental Snapshot</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Kafka-Connect/">Kafka Connect</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Mongodb/">Mongodb</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Source-Connector/">Source Connector</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Apache-Doris/">Apache Doris</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/MySQL/">Mysql</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Prepared-Statements/">Prepared Statements</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Kafka/">Kafka</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/MirrorMaker2/">MirrorMaker2</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Replication/">Replication</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Javascript/">Javascript</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/python/">Python</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Rust/">Rust</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/WASM/">WASM</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/WebAssembly/">WebAssembly</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/gRPC/">GRPC</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/grpcreplay/">Grpcreplay</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Istio/">Istio</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Kubernetes/">Kubernetes</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/sidecar/">Sidecar</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/traffic-mirror/">Traffic Mirror</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E5%8D%8F%E8%AE%AE/">协议</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Doris/">Doris</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/FoundationDB/">FoundationDB</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E5%AD%98%E7%AE%97%E5%88%86%E7%A6%BB/">存算分离</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/memcached/">Memcached</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Rendezvous-Hashing/">Rendezvous Hashing</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/tcpdump/">Tcpdump</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/wireshark/">Wireshark</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/APISIX/">APISIX</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/CDC/">CDC</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/DMS/">DMS</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Pyroscope/">Pyroscope</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/ShardingSphere-Proxy/">ShardingSphere Proxy</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/shardingsphere/">Shardingsphere</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/">分库分表</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Envoy/">Envoy</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/kubenertes/">Kubenertes</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/service-mesh/">Service Mesh</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Golang/">Golang</a>
          <span>29</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/MQ/">MQ</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/multi-raft/">Multi-Raft</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/nats/">Nats</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/raft/">Raft</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/fsnotify/">Fsnotify</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/inotify/">Inotify</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/linux/">Linux</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/c/">C</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/lua/">Lua</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/redis/">Redis</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/exec/">Exec</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/fork/">Fork</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Graceful-Restart/">Graceful Restart</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/tcp/">TCP</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Cloudflare/">Cloudflare</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/SSH/">SSH</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Tunnel/">Tunnel</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/CGO/">CGO</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/POSIX/">POSIX</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/CronJob/">CronJob</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Distributed/">Distributed</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/k8s/">K8s</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Fieldmask/">Fieldmask</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/protocol-buffers/">Protocol-Buffers</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/OpenTelemetry/">OpenTelemetry</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Sentry/">Sentry</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Tools/">Tools</a>
          <span>6</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Load-Balancing/">Load Balancing</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/docker/">Docker</a>
          <span>6</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E9%95%9C%E5%83%8F/">镜像</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Jaeger/">Jaeger</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Opentracing/">Opentracing</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Tracing/">Tracing</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Channel/">Channel</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/goim/">Goim</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Gin/">Gin</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/memory-leak/">Memory Leak</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/pprof/">Pprof</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/hashtable/">Hashtable</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/im/">Im</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/socket.io/">Socket.io</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/cache/">Cache</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/repository/">Repository</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/AMQP/">AMQP</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E6%8B%86%E5%8C%85/">拆包</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E7%B2%98%E5%8C%85/">粘包</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Ring-Buffer/">Ring Buffer</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Algorithm/">Algorithm</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Caching/">Caching</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/LRU/">LRU</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/LRU-K/">LRU-K</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Crypto/">Crypto</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/RC4/">RC4</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/snowflake/">Snowflake</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/hot-reload/">Hot-Reload</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Swagger/">Swagger</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/QR-Code/">QR Code</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/etcd/">Etcd</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/microservice/">Microservice</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E5%8F%91%E7%8E%B0/">服务注册发现</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/DTO/">DTO</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/HTTP/">HTTP</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Note/">Note</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/api-gateway/">Api-Gateway</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/round-robin/">Round-Robin</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/weighted-round-robin/">Weighted-Round-Robin</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/JSON-RPC2.0/">JSON-RPC2.0</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/RPC/">RPC</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/App/">App</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/RN/">RN</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Spider/">Spider</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/CD/">CD</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/CI/">CI</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Jenkins/">Jenkins</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Distributed-Architecture/">Distributed Architecture</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/aliyun/">Aliyun</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/rds/">Rds</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Trie/">Trie</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Dynamic-Programming/">Dynamic Programming</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Levenshtein-Distance/">Levenshtein Distance</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/ShortURL/">ShortURL</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/drone/">Drone</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/docker-compose/">Docker Compose</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/selenium/">Selenium</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Test/">Test</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Pytest/">Pytest</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Git/">Git</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/database/">Database</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/index/">Index</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  
  <article class="markdown book-post">
    <h2>
      <a href="/2019/09/21/TCP%E6%8B%86%E5%8C%85%E7%B2%98%E5%8C%85/">TCP拆包粘包</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/svg/calendar.svg" class="book-icon " alt="" />
    <span>September 21, 2019</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">技术总结</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/tags/tcp/">TCP</a>, 
      <a href="/tags/%E7%B2%98%E5%8C%85/">粘包</a>, 
      <a href="/tags/%E6%8B%86%E5%8C%85/">拆包</a>
  </div>
  


    <p><h3 id="一些名词">
  一些名词
  <a class="anchor" href="#%e4%b8%80%e4%ba%9b%e5%90%8d%e8%af%8d">#</a>
</h3>
<h4 id="mtumaximum-transmission-unit">
  MTU（Maximum Transmission Unit）
  <a class="anchor" href="#mtumaximum-transmission-unit">#</a>
</h4>
<blockquote>
<p>the maximum transmission unit (MTU) is the size of the largest protocol data unit (PDU) that can be communicated in a single network layer transaction. ——from wiki</p>
</blockquote>
<p>MTU 物理接口（数据链路层）提供给其上层（通常是IP层）最大一次传输数据的大小。一般来说<code>MTU=1500byte</code>。如果<code>MSS + TCP首部 + IP首部 &gt; MTU</code>，那么IP报文就会存在分片，否则就不需要分片。</p>
<h4 id="mss-maximum-segment-size">
  MSS (Maximum Segment Size)
  <a class="anchor" href="#mss-maximum-segment-size">#</a>
</h4>
<blockquote>
<p>The maximum segment size (MSS) is a parameter of the options field of the TCP header that specifies the largest amount of data, specified in bytes, that a computer or communications device can receive in a single TCP segment. ——from wiki</p>
        <a href="/2019/09/21/TCP%E6%8B%86%E5%8C%85%E7%B2%98%E5%8C%85/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/2019/04/01/go-watcher-%E7%83%AD%E9%87%8D%E8%BD%BD%E8%BD%AE%E5%AD%90/">go-watcher-热重载轮子</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/svg/calendar.svg" class="book-icon " alt="" />
    <span>April 1, 2019</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">技术总结</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/tags/Golang/">Golang</a>, 
      <a href="/tags/Tools/">Tools</a>, 
      <a href="/tags/hot-reload/">Hot-Reload</a>
  </div>
  


    <p><p>Golang编写的热重载工具，自定义命令，支持监视文件及路径配置，环境变量配置。这是一个重复的轮子～</p>
<!-- more -->
<h3 id="安装使用">
  安装使用
  <a class="anchor" href="#%e5%ae%89%e8%a3%85%e4%bd%bf%e7%94%a8">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">go</span> <span style="color:#a6e22e">install</span> <span style="color:#a6e22e">github</span>.<span style="color:#a6e22e">com</span><span style="color:#f92672">/</span><span style="color:#a6e22e">yeqown</span><span style="color:#f92672">/</span><span style="color:#66d9ef">go</span><span style="color:#f92672">-</span><span style="color:#a6e22e">watcher</span><span style="color:#f92672">/</span><span style="color:#a6e22e">cmd</span><span style="color:#f92672">/</span><span style="color:#66d9ef">go</span><span style="color:#f92672">-</span><span style="color:#a6e22e">watcher</span>
</span></span></code></pre></div><h3 id="命令行">
  命令行
  <a class="anchor" href="#%e5%91%bd%e4%bb%a4%e8%a1%8c">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>➜  go-watcher git:<span style="color:#f92672">(</span>master<span style="color:#f92672">)</span> ✗ ./go-watcher -h   
</span></span><span style="display:flex;"><span>NAME:
</span></span><span style="display:flex;"><span>   go-watcher - A new cli application
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>USAGE:
</span></span><span style="display:flex;"><span>   go-watcher <span style="color:#f92672">[</span>global options<span style="color:#f92672">]</span> command <span style="color:#f92672">[</span>command options<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>arguments...<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>VERSION:
</span></span><span style="display:flex;"><span>   2.0.0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>AUTHOR:
</span></span><span style="display:flex;"><span>   yeqown@gmail.com
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>COMMANDS:
</span></span><span style="display:flex;"><span>     init     generate a config file to specified postion
</span></span><span style="display:flex;"><span>     run      execute a command, and watch the files, <span style="color:#66d9ef">if</span> any change to these files, the command will reload
</span></span><span style="display:flex;"><span>     help, h  Shows a list of commands or help <span style="color:#66d9ef">for</span> one command
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>GLOBAL OPTIONS:
</span></span><span style="display:flex;"><span>   --help, -h     show help
</span></span><span style="display:flex;"><span>   --version, -v  print the version
</span></span></code></pre></div><h3 id="配置文件">
  配置文件
  <a class="anchor" href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">watcher</span>:                   <span style="color:#75715e"># 监视器配置</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">duration</span>: <span style="color:#ae81ff">2000</span>           <span style="color:#75715e"># 文件修改时间间隔，只有高于这个间隔才回触发重载</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">included_filetypes</span>:      <span style="color:#75715e"># 监视的文件扩展类型</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">.go                   </span> <span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">excluded_regexps</span>:        <span style="color:#75715e"># 不被监视更改的文件正则表达式</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">^.gitignore$</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#39;*.yml$&#39;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#39;*.txt$&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">additional_paths</span>: []       <span style="color:#75715e"># 除了当前文件夹需要额外监视的文件夹</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">excluded_paths</span>:            <span style="color:#75715e"># 不需要监视的文件名，若为相对路径，只能对于当前路径生效</span>
</span></span><span style="display:flex;"><span>- <span style="color:#ae81ff">vendor</span>
</span></span><span style="display:flex;"><span>- <span style="color:#ae81ff">.git</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">envs</span>:                      <span style="color:#75715e"># 额外的环境变量</span>
</span></span><span style="display:flex;"><span>- <span style="color:#ae81ff">GOROOT=/path/to/your/goroot</span>
</span></span><span style="display:flex;"><span>- <span style="color:#ae81ff">GOPATH=/path/to/your/gopath</span>
</span></span></code></pre></div><h3 id="使用范例日志">
  使用范例日志
  <a class="anchor" href="#%e4%bd%bf%e7%94%a8%e8%8c%83%e4%be%8b%e6%97%a5%e5%bf%97">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>➜  go-watcher git:<span style="color:#f92672">(</span>master<span style="color:#f92672">)</span> ✗ ./package/osx/go-watcher run -e <span style="color:#e6db74">&#34;make&#34;</span> -c ./config.yml
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/cmd<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/cmd/go-watcher<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/internal<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/internal/command<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/internal/log<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/internal/testdata<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/internal/testdata/exclude<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/internal/testdata/testdata_inner<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package/archived<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package/linux<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package/osx<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/resources<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/utils<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/utils/testdata<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> directory <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/utils/testdata/testdata_inner<span style="color:#f92672">)</span> is under watching
</span></span><span style="display:flex;"><span>rm -fr package
</span></span><span style="display:flex;"><span>go build -o package/osx/go-watcher cmd/go-watcher/main.go
</span></span><span style="display:flex;"><span>GOOS<span style="color:#f92672">=</span>linux GOARCH<span style="color:#f92672">=</span>amd64 go build -o package/linux/go-watcher cmd/go-watcher/main.go
</span></span><span style="display:flex;"><span>mkdir -p package/archived
</span></span><span style="display:flex;"><span>tar -zcvf package/archived/go-watcher.osx.tar.gz package/osx
</span></span><span style="display:flex;"><span>a package/osx
</span></span><span style="display:flex;"><span>a package/osx/go-watcher
</span></span><span style="display:flex;"><span>tar -zcvf package/archived/go-watcher.linux.tar.gz package/linux
</span></span><span style="display:flex;"><span>a package/linux
</span></span><span style="display:flex;"><span>a package/linux/go-watcher
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> command executed <span style="color:#66d9ef">done</span>!
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package/osx/go-watcher<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package/osx<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package/linux/go-watcher<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package/linux<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package/archived/go-watcher.linux.tar.gz<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package/archived<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/VERSION<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>/Users/yeqown/Projects/opensource/go-watcher/cmd/go-watcher/main.go<span style="color:#f92672">]</span> changed
</span></span><span style="display:flex;"><span>rm -fr package
</span></span><span style="display:flex;"><span>mkdir -p package/osx
</span></span><span style="display:flex;"><span>mkdir -p package/linux
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;2.0.0&#34;</span> &gt; VERSION
</span></span><span style="display:flex;"><span>cp VERSION package/osx
</span></span><span style="display:flex;"><span>cp VERSION package/linux
</span></span><span style="display:flex;"><span>go build -o package/osx/go-watcher cmd/go-watcher/main.go
</span></span><span style="display:flex;"><span>GOOS<span style="color:#f92672">=</span>linux GOARCH<span style="color:#f92672">=</span>amd64 go build -o package/linux/go-watcher cmd/go-watcher/main.go
</span></span><span style="display:flex;"><span>mkdir -p package/archived
</span></span><span style="display:flex;"><span>tar -zcvf package/archived/go-watcher.osx.tar.gz package/osx
</span></span><span style="display:flex;"><span>a package/osx
</span></span><span style="display:flex;"><span>a package/osx/go-watcher
</span></span><span style="display:flex;"><span>a package/osx/VERSION
</span></span><span style="display:flex;"><span>tar -zcvf package/archived/go-watcher.linux.tar.gz package/linux
</span></span><span style="display:flex;"><span>a package/linux
</span></span><span style="display:flex;"><span>a package/linux/go-watcher<span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package/osx<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package/linux<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>a package/linux/VERSION
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> command executed <span style="color:#66d9ef">done</span>!
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package/osx<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package/archived<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/VERSION<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> <span style="color:#f92672">(</span>/Users/yeqown/Projects/opensource/go-watcher/package<span style="color:#f92672">)</span> is skipped, not target filetype
</span></span><span style="display:flex;"><span>^C<span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> quit signal captured!
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> go-watcher exited
</span></span><span style="display:flex;"><span>➜  go-watcher git:<span style="color:#f92672">(</span>master<span style="color:#f92672">)</span> ✗ 
</span></span></code></pre></div>
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/2018/06/28/%E6%80%8E%E4%B9%88%E6%89%8D%E5%8F%AB%E7%86%9F%E6%82%89http%E5%8D%8F%E8%AE%AE/">怎么才叫熟悉http协议?</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/svg/calendar.svg" class="book-icon " alt="" />
    <span>June 28, 2018</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">技术总结</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/tags/HTTP/">HTTP</a>, 
      <a href="/tags/Note/">Note</a>
  </div>
  


    <p><p>“熟悉http协议”，肯定很多IT小伙伴都在招聘岗位上看得到过，但是怎么才叫熟悉http协议呢？抽空梳理了一下，也算是对这一部分知识的笔记吧！</p>
<p>可能对于大部分人来说，网络web编程就是使用一些第三方库来进行请求和响应的处理，再多说一点就是这个<code>URI</code>要使用<code>POST</code>方法，对于携带的数据需要处理成为<code>formdata</code>。</p>
<!-- more -->
<h3 id="基础知识">
  基础知识
  <a class="anchor" href="#%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86">#</a>
</h3>
<p><strong>Q1: HTTP协议是什么？用来干什么？</strong></p>
<blockquote>
<p>HTTP协议是基于TCP/IP协议的应用层协议，主要规定了客户端和服务端之间的通信格式。主要作用也就是传输数据（HTML，图片，文件，查询结果）。</p>
</blockquote>
<h4 id="网络分层">
  #网络分层
  <a class="anchor" href="#%e7%bd%91%e7%bb%9c%e5%88%86%e5%b1%82">#</a>
</h4>
<blockquote>
<p>互联网的实现分成了几层，如何分层有不同的模型（七层，五层，四层），这里按五层模型来解释：</p>
</blockquote>
<p>（靠近用户）应用层 &lt; 传输层 &lt; 网络层 &lt; 链接层 &lt; 物理层（靠近硬件）</p>
<table>
  <thead>
      <tr>
          <th>层级</th>
          <th>作用</th>
          <th>拥有协议</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>物理层</td>
          <td>传送电信号0 1</td>
          <td>无</td>
      </tr>
      <tr>
          <td>数据链路层</td>
          <td>定义数据包;网卡MAC地址;广播的发送方式;</td>
          <td>Ethernet 802.3; Token Ring 802.5</td>
      </tr>
      <tr>
          <td>网络层</td>
          <td>引进了IP地址，用于区分不同的计算机是否属于同一网络</td>
          <td>IP; ARP; RARP</td>
      </tr>
      <tr>
          <td>传输层</td>
          <td>建立端口到端口的通信，实现程序时间的交流，也就是socket</td>
          <td>TCP; UDP</td>
      </tr>
      <tr>
          <td>应用层</td>
          <td>约定应用程序的数据格式</td>
          <td>HTTP; FTP; DNS</td>
      </tr>
  </tbody>
</table>
<p><em>每一层级，都是解决问题而诞生的，也就是他们各自作用对应的问题，推荐参考资料中的“互联网协议入门”。</em></p>
<h4 id="http通信流程">
  #HTTP通信流程
  <a class="anchor" href="#http%e9%80%9a%e4%bf%a1%e6%b5%81%e7%a8%8b">#</a>
</h4>
<p><img src="https://user-gold-cdn.xitu.io/2018/4/2/1628583763cf81ca?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="http通信传输流" /></p>
<h4 id="拓展--三次握手和四次挥手">
  #拓展&ndash;三次握手和四次挥手
  <a class="anchor" href="#%e6%8b%93%e5%b1%95--%e4%b8%89%e6%ac%a1%e6%8f%a1%e6%89%8b%e5%92%8c%e5%9b%9b%e6%ac%a1%e6%8c%a5%e6%89%8b">#</a>
</h4>
<p>经常在其他地方看到这些，一直不知道了解这部分有什么用，但是<a href="https://en.wikipedia.org/wiki/SYN_flood"><code>syn Flood</code></a>攻击，恰恰是利用了TCP三次握手中的环节。利用假IP伪造<code>SYN</code>请求，服务端会多次尝试发送<code>SYN-ACK</code>给客户端，但是IP并不存在也就无法成功建立连接。在一定时间内伪造大量这种请求，会导致服务器资源耗尽无法为正常的连接服务。(注：服务器SYN连接数量有限制，SYN-ACK超时重传机制)</p>
<p>三次握手流程：</p>
<blockquote>
<ol>
<li>The client requests a connection by sending a SYN (synchronize) message to the server.</li>
<li>The server acknowledges this request by sending SYN-ACK back to the client.</li>
<li>The client responds with an ACK, and the connection is established.</li>
</ol>
</blockquote>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Tcp_normal.svg/220px-Tcp_normal.svg.png" alt="TCP three-way handshake" /></p>
        <a href="/2018/06/28/%E6%80%8E%E4%B9%88%E6%89%8D%E5%8F%AB%E7%86%9F%E6%82%89http%E5%8D%8F%E8%AE%AE/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/2018/06/08/api-gateway%E4%B8%AD%E5%AE%9E%E7%8E%B0%E5%9F%BA%E4%BA%8E%E6%9D%83%E9%87%8D%E7%9A%84%E8%BD%AE%E8%AF%A2%E8%B0%83%E5%BA%A6/">api-gateway中实现基于权重的轮询调度</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/svg/calendar.svg" class="book-icon " alt="" />
    <span>June 8, 2018</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">技术总结</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/tags/Golang/">Golang</a>, 
      <a href="/tags/api-gateway/">Api-Gateway</a>, 
      <a href="/tags/round-robin/">Round-Robin</a>, 
      <a href="/tags/weighted-round-robin/">Weighted-Round-Robin</a>
  </div>
  


    <p><h3 id="背景和目标">
  背景和目标
  <a class="anchor" href="#%e8%83%8c%e6%99%af%e5%92%8c%e7%9b%ae%e6%a0%87">#</a>
</h3>
<h4 id="背景">
  背景
  <a class="anchor" href="#%e8%83%8c%e6%99%af">#</a>
</h4>
<p>项目需要在现有项目的基础上实现权限系统，但为了低耦合，选择实现了一个基于<a href="https://github.com/ne7ermore/gRBAC">ne7ermore/gRBAC</a>的auth-server，用于实现权限，角色，用户的管理，以及提供鉴权服务。在开发环境对接没有问题，正常的鉴权访问。到了线上部署的时候，才发现：</p>
<ol>
<li><strong>线上某服务部署在多台机器上</strong>;</li>
<li><strong>目前的api-gateway并不支持同一服务配置多个node</strong>;</li>
</ol>
<p>想的办法有：</p>
<table>
  <thead>
      <tr>
          <th>序号</th>
          <th>描述</th>
          <th>优点</th>
          <th>缺点</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>1</td>
          <td>api-gateway通过url来转发请求，之前是配置IP加端口</td>
          <td>api-gateway改动小</td>
          <td>影响web和APP升级</td>
      </tr>
      <tr>
          <td>2</td>
          <td>api-gateway能支持多台机器，并进行调度</td>
          <td>api-gateway功能更强大，把以后要做的事情提前做好基础</td>
          <td>好像没啥缺点，只是费点时间支持下多节点配置，并调度</td>
      </tr>
  </tbody>
</table>
<!-- more -->
<blockquote>
<p>如果没说清，请看下图：</p>
</blockquote>
<p><img src="/images/api-gateway-changing.png" alt="api-gateway-changing" /></p>
<h4 id="目标">
  目标
  <a class="anchor" href="#%e7%9b%ae%e6%a0%87">#</a>
</h4>
<p>那么，目标也就明确了，需要实现<strong>api-gateway中实现基于权重的调度</strong>。为啥要基于权重？其一是仿照nginx基于权重的负载均衡，其二是服务器性能差异。</p>
<h3 id="轮询调度算法介绍">
  轮询调度算法介绍
  <a class="anchor" href="#%e8%bd%ae%e8%af%a2%e8%b0%83%e5%ba%a6%e7%ae%97%e6%b3%95%e4%bb%8b%e7%bb%8d">#</a>
</h3>
<h4 id="轮询调度算法">
  <strong>轮询调度算法</strong>:
  <a class="anchor" href="#%e8%bd%ae%e8%af%a2%e8%b0%83%e5%ba%a6%e7%ae%97%e6%b3%95">#</a>
</h4>
<blockquote>
<p>轮询调度算法的原理是每一次把来自用户的请求轮流分配给内部中的服务器，从1开始，直到N(内部服务器个数)，然后重新开始循环。该算法的优点是其简洁性，它无需记录当前所有连接的状态，所以它是一种无状态调度。</p>
</blockquote>
<p>假设有一组服务器N台，S = {S1, S2, …, Sn}，一个指示变量i表示上一次选择的服务器ID。变量i被初始化为N-1。其算法如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C" data-lang="C"><span style="display:flex;"><span>j <span style="color:#f92672">=</span> i;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span> {
</span></span><span style="display:flex;"><span>  j <span style="color:#f92672">=</span> (j <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) mod n;
</span></span><span style="display:flex;"><span>  i <span style="color:#f92672">=</span> j;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> Si;
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">while</span> (j <span style="color:#f92672">!=</span> i);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">return</span> NULL;
</span></span></code></pre></div><!-- #### **加权轮询调度算法**： -->
<h4 id="平滑加权轮询调度算法">
  <strong>平滑加权轮询调度算法</strong>：
  <a class="anchor" href="#%e5%b9%b3%e6%bb%91%e5%8a%a0%e6%9d%83%e8%bd%ae%e8%af%a2%e8%b0%83%e5%ba%a6%e7%ae%97%e6%b3%95">#</a>
</h4>
<blockquote>
<p>上述的轮询调度算法，并没有考虑服务器性能的差异，实际生产环境中，每一台服务器配置和安装的业务并不一定相同，处理能力不完全一样。因此需要根据服务器能力，分配不同的权值，以免服务的超负荷和过分闲余。</p>
        <a href="/2018/06/08/api-gateway%E4%B8%AD%E5%AE%9E%E7%8E%B0%E5%9F%BA%E4%BA%8E%E6%9D%83%E9%87%8D%E7%9A%84%E8%BD%AE%E8%AF%A2%E8%B0%83%E5%BA%A6/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/2018/05/18/%E8%87%AA%E5%B7%B1%E5%86%99%E4%B8%80%E4%B8%AA%E6%89%8B%E6%9C%BA%E8%8F%9C%E8%B0%B1APP/">自己写一个手机菜谱APP</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/svg/calendar.svg" class="book-icon " alt="" />
    <span>May 18, 2018</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">技术总结</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/tags/RN/">RN</a>, 
      <a href="/tags/Golang/">Golang</a>, 
      <a href="/tags/python/">Python</a>, 
      <a href="/tags/Spider/">Spider</a>, 
      <a href="/tags/App/">App</a>
  </div>
  


    <p><p>需要的技术及工具：</p>
<ul>
<li>Python3 + Selenuium</li>
<li>Golang net/http</li>
<li>React-Native 相关（使用了react-navigation）</li>
<li>MongoDB</li>
<li>Redis</li>
</ul>
<p>代码地址：</p>
<ul>
<li><a href="https://github.com/yeqown/recipe">github.com/yeqown/recipe</a></li>
</ul>
<!-- more -->
<h3 id="项目构思及构成">
  项目构思及构成
  <a class="anchor" href="#%e9%a1%b9%e7%9b%ae%e6%9e%84%e6%80%9d%e5%8f%8a%e6%9e%84%e6%88%90">#</a>
</h3>
<p>食谱类型的App，应用市场肯定有更好的的食谱APP。所以自己开发的目的，首先是写代码，其次是定制APP～
好的，现在化身产品经理，设计一下APP有哪些功能：</p>
<ul>
<li>每日菜谱推荐，推荐可更换</li>
<li>每天需要准备的材料提醒</li>
<li>发现更多菜谱</li>
<li>分类筛选菜谱</li>
<li>搜索菜谱</li>
<li>查看菜谱详情</li>
<li>设置（不知道设置啥，提前准备吧）</li>
</ul>
<blockquote>
<p>设计稿？不存在的，随心所欲。</p>
</blockquote>
<p>现在分析下我需要做的事情：</p>
<ol>
<li>能跑起来的APP，与restful web api 交互。</li>
<li>能跑起来的web-api，提供菜谱数据，筛选，推荐，搜索等功能</li>
<li>能跑起来的简易spider，从网上获取菜谱信息。（这个爬虫能解析动态生成网站就够用了，姑且称之为爬虫吧）</li>
</ol>
<blockquote>
<p>没有考虑大量数据，因此爬虫并不通用，只适合特定XX网站。</p>
</blockquote>
<h3 id="实战爬虫">
  实战爬虫
  <a class="anchor" href="#%e5%ae%9e%e6%88%98%e7%88%ac%e8%99%ab">#</a>
</h3>
<p>这个APP里面最重要的就是菜谱数据了，那么开发之前，需要明确的数据格式，如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;name&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;cat&#34;</span>: <span style="color:#e6db74">&#34;cat&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;img&#34;</span>: <span style="color:#e6db74">&#34;img_url&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;mark_cnt&#34;</span>: <span style="color:#ae81ff">19101</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;view_cnt&#34;</span>: <span style="color:#ae81ff">181891</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;setps&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;desc&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;img&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// more step
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;material&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;ingredients&#34;</span>: [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;ingredients_name&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;weight&#34;</span>: <span style="color:#e6db74">&#34;ingredients_weight&#34;</span>,
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// more ingredients
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        ],
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;seasoning&#34;</span>: [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;seasoning_name&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;weight&#34;</span>: <span style="color:#e6db74">&#34;seasoning_weight&#34;</span>,
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// more seasoning
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        ],
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;create_time&#34;</span>: <span style="color:#e6db74">&#34;2018xxxxxx&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;update_time&#34;</span>: <span style="color:#e6db74">&#34;2018xxxxxx&#34;</span>,
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="目标">
  目标
  <a class="anchor" href="#%e7%9b%ae%e6%a0%87">#</a>
</h4>
<blockquote>
<p>前提：无法直接获取到该网站的服务API，才使用爬虫间接获取数据。</p>
        <a href="/2018/05/18/%E8%87%AA%E5%B7%B1%E5%86%99%E4%B8%80%E4%B8%AA%E6%89%8B%E6%9C%BA%E8%8F%9C%E8%B0%B1APP/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/2018/04/20/gorm%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/">gorm使用记录</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/svg/calendar.svg" class="book-icon " alt="" />
    <span>April 20, 2018</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">技术总结</a>, 
      <a href="/categories/Golang/">Golang</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/tags/Golang/">Golang</a>
  </div>
  


    <p><h3 id="关于gorm">
  关于Gorm
  <a class="anchor" href="#%e5%85%b3%e4%ba%8egorm">#</a>
</h3>
<p><a href="http://doc.gorm.io">gorm文档</a></p>
<!-- [gorm文档2](http://gorm.io) -->
<!-- more -->
<h3 id="遇见问题">
  遇见问题
  <a class="anchor" href="#%e9%81%87%e8%a7%81%e9%97%ae%e9%a2%98">#</a>
</h3>
<h4 id="无法通过结构体的方式更新或查询零值">
  <strong>无法通过结构体的方式更新或查询零值</strong>
  <a class="anchor" href="#%e6%97%a0%e6%b3%95%e9%80%9a%e8%bf%87%e7%bb%93%e6%9e%84%e4%bd%93%e7%9a%84%e6%96%b9%e5%bc%8f%e6%9b%b4%e6%96%b0%e6%88%96%e6%9f%a5%e8%af%a2%e9%9b%b6%e5%80%bc">#</a>
</h4>
<pre><code>这里零值是说，各个类型的默认值。
</code></pre>
<p>关于这一点是在<a href="http://doc.gorm.io/crud.html#update">这里</a>中注明了的，也提供了解决方案：</p>
<blockquote>
<p>WARNING when update with struct, GORM will only update those fields that with non blank value</p>
</blockquote>
<blockquote>
<p>For below Update, nothing will be updated as &ldquo;&rdquo;, 0, false are blank values of their types</p>
</blockquote>
<blockquote>
<p>NOTE When query with struct, GORM will only query with those fields has non-zero value, that means if your field’s value is 0, &lsquo;&rsquo;, false or other zero values, it won’t be used to build query conditions,</p>
        <a href="/2018/04/20/gorm%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/2018/04/08/Golang%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Golang学习笔记</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/svg/calendar.svg" class="book-icon " alt="" />
    <span>April 8, 2018</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/Golang/">Golang</a>, 
      <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">技术总结</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/tags/Golang/">Golang</a>
  </div>
  


    <p><h3 id="目录">
  目录
  <a class="anchor" href="#%e7%9b%ae%e5%bd%95">#</a>
</h3>
<ul>
<li><a href="#Channel">Channel</a></li>
<li><a href="#Goroutine">Goroutine</a></li>
</ul>
<!-- more -->
<h3 id="channel">
  Channel
  <a class="anchor" href="#channel">#</a>
</h3>
<p>一开始是在看channel的源码，结果发现里面含有一些抽象的描述（可能也就是我觉得。。。毕竟没有深入）</p>
<blockquote>
<p>Do not change another G&rsquo;s status while holding this lock
(in particular, do not ready a G), as this can deadlock
with stack shrinking.</p>
</blockquote>
<p>其中<code>G</code>是啥？我看着是很懵逼的，去google了一下，其实是goroutine相关的知识，那就把goroutine理解了先。</p>
<blockquote>
<p>2020-04-13 填坑</p>
</blockquote>
<p><a href="/2020/04/13/channel-in-Go%e5%b0%8f%e7%bb%93/">channel in go</a></p>
<h3 id="goroutine">
  Goroutine
  <a class="anchor" href="#goroutine">#</a>
</h3>
<blockquote>
<p>G: 表示goroutine，存储了goroutine的执行stack信息、goroutine状态以及goroutine的任务函数等；另外G对象是可以重用的。
P: 表示逻辑processor，P的数量决定了系统内最大可并行的G的数量（前提：系统的物理cpu核数&gt;=P的数量）；P的最大作用还是其拥有的各种G对象队列、链表、一些cache和状态。
M: 代表着真正的执行计算资源。在绑定有效的p后，进入schedule循环；而schedule循环的机制大致是从各种队列、p的本地队列中获取G，切换到G的执行栈上并执行G的函数，调用goexit做清理工作并回到m，如此反复。M并不保留G状态，这是G可以跨M调度的基础。M必须关联了P才能执行Go代码。</p>
</blockquote>
<p>结合下图更方便理解： &ndash;源于Tonybai的博客，见参考资料。
<img src="http://tonybai.com/wp-content/uploads/goroutine-scheduler-model.png" alt="Goroutine调度原理图" /></p>
<h3 id="参考资料">
  参考资料
  <a class="anchor" href="#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99">#</a>
</h3>
<ul>
<li><a href="https://github.com/golang/go/blob/master/src/runtime/runtime2.go">runtime/runtime2.go</a></li>
<li><a href="https://tonybai.com/2017/06/23/an-intro-about-goroutine-scheduler/">Tonybai-goroutine调度器</a></li>
</ul>
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/2018/03/02/aliyun-rds%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E6%96%B9%E6%A1%88/">aliyun-rds数据备份方案</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/svg/calendar.svg" class="book-icon " alt="" />
    <span>March 2, 2018</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">技术总结</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/tags/aliyun/">Aliyun</a>, 
      <a href="/tags/rds/">Rds</a>
  </div>
  


    <p><p>本文主要是总结下在使用aliyun-rds数据备份方案过程中的心得。</p>
<p>高可用一直都是线上服务维护用户体验的关键之一。为了达到高可用，业界已经有了很多方案。最典型的就是“冗余备份+自动故障转移”。冗余备份是说，当一个节点服务不可用时，有其他服务能够代替其工作。除此之外，如果服务出现了必须人工介入解决的故障，也会影响系统的高可用特性。</p>
<!-- more -->
<blockquote>
<p>本文着重介绍数据的高可用方案</p>
</blockquote>
<h3 id="数据库冗余">
  数据库冗余
  <a class="anchor" href="#%e6%95%b0%e6%8d%ae%e5%ba%93%e5%86%97%e4%bd%99">#</a>
</h3>
<p>如果是单节点的数据库，还用的着说吗？要保证服务高可用，除了主-从数据库之外，还需要从备份数据库，当然不能保证说一定不会遇到所有的备份数据库，都挂掉的情况&hellip;。阿里云提供了<a href="https://www.aliyun.com/product/rds/mysql?spm=5176.11065259.765261.323.44034a1drJY3dc">RDS-高可用版本</a>和<a href="https://www.aliyun.com/product/rds/mysql?spm=5176.11065259.765261.323.44034a1drJY3dc">RDS-单机版</a>,两者的区别见下图：
<img src="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/48980/cn_zh/1512034470993/%E5%9F%BA%E7%A1%80%E7%89%88%E6%8B%93%E6%89%91%E5%9B%BE.png" alt="基础版和高可用" />
这就算最基本的冗余了，没有主从复制，没有读写分离。但是能保证主库在换掉的时候，还能使用备库提供服务。如果服务对于数据库性能和可用性有一定要求，那么可以在这个基础上升个级，见下图：
<img src="https://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/cn/rds/1.0.112/assets/qs/rds_qs_mysql_00024.png" alt="灾备方案" /></p>
<h3 id="数据故障自动转移">
  数据故障自动转移
  <a class="anchor" href="#%e6%95%b0%e6%8d%ae%e6%95%85%e9%9a%9c%e8%87%aa%e5%8a%a8%e8%bd%ac%e7%a7%bb">#</a>
</h3>
<p>已经有了冗余的数据库节点了，那么接下来要做的事情就是怎么感知数据库异常，并实现自动切换到备份实例中? 阿里云灾备方案的文档是这样描述的：</p>
<blockquote>
<p>主实例和灾备实例均搭建主备高可用架构，当主实例所在区域发生突发性自然灾害等状况，主节点（Master）和备节点（Slave）均无法连接时，可将异地灾备实例切换为主实例，在应用端修改数据库链接地址后，即可快速恢复应用的业务访问。</p>
</blockquote>
<p>对于主节点全部不可用的情况对应用服务是可见的，因此应用服务可以通过指定一些异常判断，在判定主节点不可用的时候，主动切换数据库连接地址来获取数据，提供服务。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-golang" data-lang="golang"><span style="display:flex;"><span><span style="color:#75715e">// sql-detect.go
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;database/sql&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;sync&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;time&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">_</span> <span style="color:#e6db74">&#34;github.com/go-sql-driver/mysql&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">_</span> <span style="color:#e6db74">&#34;github.com/mxk/go-sqlite&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mysqlAvailable</span> <span style="color:#66d9ef">bool</span>    = <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mutex</span>                  = <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Mutex</span>{}
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">db</span>             <span style="color:#f92672">*</span><span style="color:#a6e22e">sql</span>.<span style="color:#a6e22e">DB</span> = <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">MysqlDetection</span>(<span style="color:#a6e22e">db</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">sql</span>.<span style="color:#a6e22e">DB</span>, <span style="color:#a6e22e">ticker</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Ticker</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">select</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ticker</span>.<span style="color:#a6e22e">C</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">e</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">Ping</span>(); <span style="color:#a6e22e">e</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;got error&#34;</span>, <span style="color:#a6e22e">e</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">mutex</span>.<span style="color:#a6e22e">Lock</span>()
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">mysqlAvailable</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">mutex</span>.<span style="color:#a6e22e">Unlock</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;status ok&#34;</span>)
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">MysqlSwitch</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mutex</span>.<span style="color:#a6e22e">Lock</span>()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">mysqlAvailable</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Switch Sqlite3&#34;</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">db</span>, <span style="color:#a6e22e">_</span> = <span style="color:#a6e22e">sql</span>.<span style="color:#a6e22e">Open</span>(<span style="color:#e6db74">&#34;sqlite3&#34;</span>, <span style="color:#e6db74">&#34;./foo.db&#34;</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mutex</span>.<span style="color:#a6e22e">Unlock</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">bool</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">db</span>, <span style="color:#a6e22e">_</span> = <span style="color:#a6e22e">sql</span>.<span style="color:#a6e22e">Open</span>(<span style="color:#e6db74">&#34;mysql&#34;</span>, <span style="color:#e6db74">&#34;yeqiang:yeqiang@/test_yeqiang&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ticker</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">NewTicker</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">go</span> <span style="color:#a6e22e">MysqlDetection</span>(<span style="color:#a6e22e">db</span>, <span style="color:#a6e22e">ticker</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">go</span> <span style="color:#a6e22e">MysqlSwitch</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">c</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>测试截图：</p>
        <a href="/2018/03/02/aliyun-rds%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E6%96%B9%E6%A1%88/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/2018/01/29/ShortURL%E7%94%9F%E6%88%90%E7%B3%BB%E7%BB%9F/">ShortURL系统实现</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 29, 2018</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">技术总结</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/tags/Golang/">Golang</a>, 
      <a href="/tags/Tools/">Tools</a>, 
      <a href="/tags/ShortURL/">ShortURL</a>
  </div>
  


    <p><p>在知乎上看了一个很有启发的回答，因此实际动手来实现短URL生成系统。贴上链接：
<a href="https://www.zhihu.com/question/29270034">知乎 - 短URL系统是如何设计的</a>。其中提到了，要实现短URL生成系统要解决的问题有：</p>
<ul>
<li>如何优雅的实现？</li>
<li>怎么基本实现长对短、一对一？</li>
<li>如何实现分布式，高并发，高可用？</li>
<li>储存选用？</li>
</ul>
<!-- more -->
<h3 id="基本原理">
  基本原理
  <a class="anchor" href="#%e5%9f%ba%e6%9c%ac%e5%8e%9f%e7%90%86">#</a>
</h3>
<p><strong>数据库自增ID转换62进制</strong></p>
<ol>
<li>使用自增ID不会产生重复的短链接。</li>
<li>为了解决自增ID超长和不便记忆，对ID进行62进制编码。<em>所谓62进制就是0-9，a-z，A-Z。</em></li>
</ol>
<p>简单计算下：</p>
<pre tabindex="0"><code>62 ^ 4 = 14,776,336
62 ^ 5 = 916,132,832
62 ^ 6 = 56,800,235,584 // 已经足够使用了
</code></pre><h3 id="总体结构及处理流程">
  总体结构及处理流程
  <a class="anchor" href="#%e6%80%bb%e4%bd%93%e7%bb%93%e6%9e%84%e5%8f%8a%e5%a4%84%e7%90%86%e6%b5%81%e7%a8%8b">#</a>
</h3>
<p><img src="/images/service_frame.png" alt="服务结构" /></p>
<h4 id="长链接处理流程">
  长链接处理流程
  <a class="anchor" href="#%e9%95%bf%e9%93%be%e6%8e%a5%e5%a4%84%e7%90%86%e6%b5%81%e7%a8%8b">#</a>
</h4>
<ol>
<li>获取参数，调用shortURL服务</li>
<li>尝试从缓存中获取，如果命中，则读取短链接(重置过期时间)。跳转第4步</li>
<li>将长链接存储到Mysql数据库，根据ID进行base62编码，组装Domain+Encoded字符串并更新数据库</li>
<li>返回生成的短链接</li>
</ol>
<h4 id="短链接处理流程">
  短链接处理流程
  <a class="anchor" href="#%e7%9f%ad%e9%93%be%e6%8e%a5%e5%a4%84%e7%90%86%e6%b5%81%e7%a8%8b">#</a>
</h4>
<ol>
<li>解析短链接为ID</li>
<li>查询ID对应的长链接</li>
<li>以301方式跳转到长链接</li>
</ol>
<h3 id="长链接与短链接的对应关系">
  长链接与短链接的对应关系
  <a class="anchor" href="#%e9%95%bf%e9%93%be%e6%8e%a5%e4%b8%8e%e7%9f%ad%e9%93%be%e6%8e%a5%e7%9a%84%e5%af%b9%e5%ba%94%e5%85%b3%e7%b3%bb">#</a>
</h3>
<p>一对多，一个长链接可能对应多个短链接。数据表存储结构如下：</p>
<pre><code>+-----------+--------------+------+-----+---------+----------------+
| Field     | Type         | Null | Key | Default | Extra          |
+-----------+--------------+------+-----+---------+----------------+
| id        | int(64)      | NO   | PRI | NULL    | auto_increment |
| long_url  | varchar(100) | NO   |     | NULL    |                |
| short_url | varchar(40)  | YES  |     | NULL    |                |
+-----------+--------------+------+-----+---------+----------------+
</code></pre>
<h3 id="分布式和高并发设计">
  分布式和高并发设计
  <a class="anchor" href="#%e5%88%86%e5%b8%83%e5%bc%8f%e5%92%8c%e9%ab%98%e5%b9%b6%e5%8f%91%e8%ae%be%e8%ae%a1">#</a>
</h3>
<p>###注：这部分未实现。我的思路如下：</p>
        <a href="/2018/01/29/ShortURL%E7%94%9F%E6%88%90%E7%B3%BB%E7%BB%9F/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/2018/01/27/Golang%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/">Golang服务端技术笔记</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 27, 2018</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">技术总结</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/tags/Golang/">Golang</a>
  </div>
  


    <p><p>总结使用Golang开发服务端时，使用的基础的工具和部署方式。用于思考不足并优化，提升编码效率。
总体上采用MVCS的软件模式，如下图：</p>
<p><img src="/images/MVCS%e6%a8%a1%e5%bc%8f.png" alt="MVCS模式" /></p>
<!--  more -->
<p>从图中可以看出，MVCS是从MVC进化而来，相比于MVC，增加了Service层。把业务逻辑从Controller层中抽离出来，这样做的好处在于，项目日益庞大之后，将某些功能独立出来。</p>
<h3 id="golang工具">
  Golang工具
  <a class="anchor" href="#golang%e5%b7%a5%e5%85%b7">#</a>
</h3>
<blockquote>
<p>&ldquo;gvt&rdquo;           依赖管理工具
&ldquo;httprouter&rdquo;    路由及中间件配置
&ldquo;schema&rdquo;        解析请求参数到结构体
&ldquo;beego/validation&rdquo; 结构体校验工具
&ldquo;github.com/go-redis/redis&rdquo; redis操作库
&ldquo;github.com/go-sql-driver/mysql&rdquo; Mysql Driver</p>
</blockquote>
<h3 id="文件结构">
  文件结构
  <a class="anchor" href="#%e6%96%87%e4%bb%b6%e7%bb%93%e6%9e%84">#</a>
</h3>
<pre tabindex="0"><code>--Golang Project
    |-sh            # shell脚本，包括数据库脚本
    |-config        # 配置文件
    |-logs          # 日志文件
    |-vendor        # 项目源码及依赖
    |  |-github.com #
    |  |-mainfest   # gvt 依赖管理文件
    |  |-app
    |     |-utils
    |     |-controllers
    |     |-models
    |     |-route
    |     |-services
    |-Dockerfile    # docker构建镜像配置文件
    |-docker-compose.yml # docker-compose.yml文件
    `-entry.go      # web服务入口文件
</code></pre><h3 id="部署方式">
  部署方式
  <a class="anchor" href="#%e9%83%a8%e7%bd%b2%e6%96%b9%e5%bc%8f">#</a>
</h3>
<p>采用docker来部署应用。分别编写Dockerfile和docker-composer.yml文件，实例如下：</p>
        <a href="/2018/01/27/Golang%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/">...</a>
      
    </p>
  </article>
  

  
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/page/2/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/" aria-label="Page 1" class="page-link" role="button">1</a>
      </li>
      <li class="page-item">
        <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/page/2/" aria-label="Page 2" class="page-link" role="button">2</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 3" class="page-link" role="button">3</a>
      </li>
      <li class="page-item">
        <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/page/4/" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/page/4/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/page/4/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">






<div class="flex align-center">
    <span id="busuanzi_container_site_pv" style="margin-right: 10px;">
        访问量<span id="busuanzi_value_site_pv"></span>
    </span>
    <span id="busuanzi_container_site_uv" style="margin-right: 10px;">
        访客数<span id="busuanzi_value_site_uv"></span>
    </span>
</div></div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  <nav>
  <ul>
  
    
    <li class="book-section-flat">
      <strong>Categories</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">技术总结</a>
          <span>32</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/Kubernetes/">Kubernetes</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a>
          <span>6</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/Service-Mesh/">Service Mesh</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/Golang/">Golang</a>
          <span>11</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/design/">Design</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/Tracing/">Tracing</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/Algorithm/">Algorithm</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/DevOps/">DevOps</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/Test/">Test</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">常用命令</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
    
    <li class="book-section-flat">
      <strong>Tags</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/tags/Debezium/">Debezium</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Incremental-Snapshot/">Incremental Snapshot</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Kafka-Connect/">Kafka Connect</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Mongodb/">Mongodb</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Source-Connector/">Source Connector</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Apache-Doris/">Apache Doris</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/MySQL/">Mysql</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Prepared-Statements/">Prepared Statements</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Kafka/">Kafka</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/MirrorMaker2/">MirrorMaker2</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Replication/">Replication</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Javascript/">Javascript</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/python/">Python</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Rust/">Rust</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/WASM/">WASM</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/WebAssembly/">WebAssembly</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/gRPC/">GRPC</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/grpcreplay/">Grpcreplay</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Istio/">Istio</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Kubernetes/">Kubernetes</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/sidecar/">Sidecar</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/traffic-mirror/">Traffic Mirror</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E5%8D%8F%E8%AE%AE/">协议</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Doris/">Doris</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/FoundationDB/">FoundationDB</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E5%AD%98%E7%AE%97%E5%88%86%E7%A6%BB/">存算分离</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/memcached/">Memcached</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Rendezvous-Hashing/">Rendezvous Hashing</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/tcpdump/">Tcpdump</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/wireshark/">Wireshark</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/APISIX/">APISIX</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/CDC/">CDC</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/DMS/">DMS</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Pyroscope/">Pyroscope</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/ShardingSphere-Proxy/">ShardingSphere Proxy</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/shardingsphere/">Shardingsphere</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/">分库分表</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Envoy/">Envoy</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/kubenertes/">Kubenertes</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/service-mesh/">Service Mesh</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Golang/">Golang</a>
          <span>29</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/MQ/">MQ</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/multi-raft/">Multi-Raft</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/nats/">Nats</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/raft/">Raft</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/fsnotify/">Fsnotify</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/inotify/">Inotify</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/linux/">Linux</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/c/">C</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/lua/">Lua</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/redis/">Redis</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/exec/">Exec</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/fork/">Fork</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Graceful-Restart/">Graceful Restart</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/tcp/">TCP</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Cloudflare/">Cloudflare</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/SSH/">SSH</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Tunnel/">Tunnel</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/CGO/">CGO</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/POSIX/">POSIX</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/CronJob/">CronJob</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Distributed/">Distributed</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/k8s/">K8s</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Fieldmask/">Fieldmask</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/protocol-buffers/">Protocol-Buffers</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/OpenTelemetry/">OpenTelemetry</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Sentry/">Sentry</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Tools/">Tools</a>
          <span>6</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Load-Balancing/">Load Balancing</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/docker/">Docker</a>
          <span>6</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E9%95%9C%E5%83%8F/">镜像</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Jaeger/">Jaeger</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Opentracing/">Opentracing</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Tracing/">Tracing</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Channel/">Channel</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/goim/">Goim</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Gin/">Gin</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/memory-leak/">Memory Leak</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/pprof/">Pprof</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/hashtable/">Hashtable</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/im/">Im</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/socket.io/">Socket.io</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/cache/">Cache</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/repository/">Repository</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/AMQP/">AMQP</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E6%8B%86%E5%8C%85/">拆包</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E7%B2%98%E5%8C%85/">粘包</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Ring-Buffer/">Ring Buffer</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Algorithm/">Algorithm</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Caching/">Caching</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/LRU/">LRU</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/LRU-K/">LRU-K</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Crypto/">Crypto</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/RC4/">RC4</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/snowflake/">Snowflake</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/hot-reload/">Hot-Reload</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Swagger/">Swagger</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/QR-Code/">QR Code</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/etcd/">Etcd</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/microservice/">Microservice</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E5%8F%91%E7%8E%B0/">服务注册发现</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/DTO/">DTO</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/HTTP/">HTTP</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Note/">Note</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/api-gateway/">Api-Gateway</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/round-robin/">Round-Robin</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/weighted-round-robin/">Weighted-Round-Robin</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/JSON-RPC2.0/">JSON-RPC2.0</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/RPC/">RPC</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/App/">App</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/RN/">RN</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Spider/">Spider</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/CD/">CD</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/CI/">CI</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Jenkins/">Jenkins</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Distributed-Architecture/">Distributed Architecture</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/aliyun/">Aliyun</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/rds/">Rds</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Trie/">Trie</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Dynamic-Programming/">Dynamic Programming</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Levenshtein-Distance/">Levenshtein Distance</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/ShortURL/">ShortURL</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/drone/">Drone</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/docker-compose/">Docker Compose</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/selenium/">Selenium</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Test/">Test</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Pytest/">Pytest</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Git/">Git</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/database/">Database</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/index/">Index</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
  </ul>
</nav>

 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












